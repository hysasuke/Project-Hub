(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8156)}])},8156:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ej}});var n=r(5893),s=r(9008),l=r.n(s),i=r(7294),o=r(6249),a=r(4040),c=r(6979),d=r(9048),u=r(3165),h=r(2495),x=r(9743),m=r(6429),j=r(7690),y=r(7976),g=r(3946);let p=e=>{let t=i.useRef(),r=i.useRef(),n=s=>{if(void 0!=r.current){let t=s-r.current;e(t)}r.current=s,t.current=requestAnimationFrame(n)};i.useEffect(()=>(t.current=requestAnimationFrame(n),()=>cancelAnimationFrame(t.current)),[])};var f=r(9858),Z=r(9066),P=r(5924),b=r(2295),C=r(6340),w=r(8327);async function S(e,t){console.log("fetching: "+e);try{let r=await fetch(e,t);if(!r)return{error:1,data:null,message:"No response from server"};{let e=await r.json();return e}}catch(e){return{error:1,data:null,message:e.message}}}let k="http://192.168.0.241:9153";async function v(){let e=await S("".concat(k,"/system/shutdown"),{method:"GET"});return e}async function I(){let e=await S("".concat(k,"/system/restart"),{method:"GET"});return e}async function N(){let e=await S("".concat(k,"/system/volume"),{method:"GET"});return e}k="http://192.168.0.241:9153";var E=r(7957),G=r(4282),T=r(685),F=r(6540);function B(e){let{setEditing:t,editing:r,setShutdownModalVisible:s,socketMessage:l,socket:S,groupPanelExpanded:k,setGroupPanelExpanded:v,setRestartModalVisible:I,groups:B,currentGroupId:D,setCurrentGroup:R,setCurrentGroupId:z,setVisible:M}=e;(0,o.Z)();let[O,A]=i.useState(""),[L,H]=i.useState(0),[W,_]=i.useState(0),[J,K]=i.useState(!1),V=i.useRef(null);p(()=>{A(q())}),(0,i.useEffect)(()=>{let e=async()=>{let e=await N();0===e.error&&(H(e.data.volume),_(e.data.volume),K(e.data.muted))};e()},[]),(0,i.useEffect)(()=>{l&&"system_volume"===l.type&&(Object.keys(l.data).includes("muted")?K(l.data.muted):Object.keys(l.data).includes("volume")&&(H(l.data.volume),_(l.data.volume)))},[l]);let q=()=>{let e=new Date,t=10>e.getHours()?"0".concat(e.getHours()):e.getHours(),r=10>e.getMinutes()?"0".concat(e.getMinutes()):e.getMinutes(),n=10>e.getSeconds()?"0".concat(e.getSeconds()):e.getSeconds(),s="".concat(t,":").concat(r,":").concat(n);return s};return(0,n.jsxs)(d.ZP,{isBordered:!0,variant:"floating",maxWidth:"fluid",children:[(0,n.jsx)(d.ZP.Toggle,{ref:V,showIn:"xs"}),(0,n.jsxs)(d.ZP.Brand,{css:{"@xs":{w:"12%"}},children:[(0,n.jsx)(u.Z,{css:{display:"none","@xs":{display:"inline"}},children:(0,n.jsx)(g.Z,{onClick:()=>{v(!k)},children:(0,n.jsx)(T.Z,{style:{color:"white",transform:"rotate(".concat(k?"0deg":"180deg",")")}})})}),(0,n.jsx)(c.Z,{b:!0,color:"inherit",hideIn:"xs",children:"Project Hub"})]}),(0,n.jsx)(d.ZP.Content,{style:{flex:1,justifyContent:"center"},children:(0,n.jsx)(h.ZP,{content:(()=>{let e=new Date,t=10>e.getDate()?"0".concat(e.getDate()):e.getDate(),r=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,n=10>e.getFullYear()?"0".concat(e.getFullYear()):e.getFullYear(),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],l="".concat(n,"-").concat(r,"-").concat(t," ").concat(s);return l})(),rounded:!0,placement:"bottom",children:(0,n.jsx)(c.Z,{b:!0,color:"inherit",hideIn:"xs",children:O})})}),(0,n.jsxs)(d.ZP.Content,{css:{"@xs":{w:"12%",jc:"flex-end"}},children:[(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(x.Z.Trigger,{children:(0,n.jsx)(g.Z,{style:{color:"white"},children:J?(0,n.jsx)(b.Z,{}):0===W?(0,n.jsx)(P.Z,{}):W<50?(0,n.jsx)(Z.Z,{}):W>=50?(0,n.jsx)(C.Z,{}):null})}),(0,n.jsx)(x.Z.Content,{children:(0,n.jsxs)(a.Z,{style:{width:200,padding:20},align:"center",children:[(0,n.jsx)(c.Z,{children:W}),(0,n.jsx)(w.ZP,{size:"small","aria-label":"Volume",value:W,style:{marginLeft:10},min:0,max:100,onChangeCommitted:(e,t)=>{S&&S.send(JSON.stringify({type:"system_volume",data:{volume:t}}))},onChange:e=>{let t=e.target;parseInt(t.value)>=0&&_(parseInt(t.value))}})]})})]}),(0,n.jsxs)(m.ZP,{placement:"bottom-right",children:[(0,n.jsx)(d.ZP.Item,{children:(0,n.jsx)(m.ZP.Trigger,{children:(0,n.jsx)(g.Z,{style:{color:"white"},children:(0,n.jsx)(y.Z,{})})})}),(0,n.jsxs)(m.ZP.Menu,{"aria-label":"Actions",color:"secondary",onAction:e=>{switch(e){case"edit":t(!r);break;case"shutdown":s(!0);break;case"restart":I(!0)}},children:[(0,n.jsx)(m.ZP.Item,{color:r?"success":"primary",children:(0,n.jsxs)(a.Z,{align:"center",children:[(0,n.jsx)(E.Z,{}),(0,n.jsx)(c.Z,{style:{textTransform:"uppercase",marginLeft:5},children:r?"DONE":"EDIT"})]})},"edit"),(0,n.jsx)(m.ZP.Item,{withDivider:!0,color:"warning",children:(0,n.jsxs)(a.Z,{align:"center",children:[(0,n.jsx)(G.Z,{}),(0,n.jsx)(c.Z,{style:{textTransform:"uppercase",marginLeft:5},children:"Restart"})]})},"restart"),(0,n.jsx)(m.ZP.Item,{color:"error",children:(0,n.jsxs)(a.Z,{align:"center",children:[(0,n.jsx)(f.Z,{}),(0,n.jsx)(c.Z,{style:{textTransform:"uppercase",marginLeft:5},children:"Shutdown"})]})},"shutdown")]})]})]}),(0,n.jsxs)(d.ZP.Collapse,{disableAnimation:!0,children:[null==B?void 0:B.map((e,t)=>(0,n.jsx)(d.ZP.CollapseItem,{children:(0,n.jsx)(j.ZP,{color:D===e.id?"primary":"secondary",onPress:()=>{if(V.current){var t;null===(t=V.current)||void 0===t||t.click()}z(e.id),R(e)},ghost:!0,css:{minWidth:"100%"},href:"#",children:e.name})},"headerGroupItem:"+e.id)),(0,n.jsx)(d.ZP.CollapseItem,{children:(0,n.jsx)(j.ZP,{onPress:()=>{if(V.current){var e;null===(e=V.current)||void 0===e||e.click()}M(!0)},css:{minWidth:"100%",borderColor:"grey",backgroundColor:"transparent"},ghost:!0,children:(0,n.jsx)(F.Z,{style:{color:"gray"}})})})]})]})}var D=r(9837),R=r(2553),z=r(5650),M=r(6562),O=r(7501),A=r(8773);let L="http://192.168.0.241:9153";async function H(){let e=await S("".concat(L,"/group"));return e}async function W(e,t){let r=await S("".concat(L,"/group"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,type:t})});return r}async function _(e){let t=await S("".concat(L,"/groupItem/").concat(e));return t}async function J(e){let{groupId:t,name:r,type:n,selectedFile:s,url:l,keybind:i,icon:o}=e,a=await S("".concat(L,"/groupItem/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,type:n,selectedFile:s,url:l,keybind:i,icon:o})});return a}async function K(){let e=await S("".concat(L,"/requestFileSelection"));return e}async function V(e){let t=await S("".concat(L,"/groupItem/execute/").concat(e));return t}async function q(e){let t=await S("".concat(L,"/groupItem/").concat(e),{method:"DELETE"});return t}async function U(e,t){let r=await S("".concat(L,"/group/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return r}async function Y(e){let t=await S("".concat(L,"/group/").concat(e),{method:"DELETE"});return t}async function X(e,t){let r=await S("".concat(L,"/groupItem/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return r}async function Q(e){let t=await S("".concat(L,"/groupItem/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupItems:e})});return t}async function $(e){let t=await S("".concat(L,"/group/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:e})});return t}async function ee(e){let t=new FormData;t.append("file",e);let r=await S("".concat(L,"/upload/icon"),{method:"POST",body:t});return r}L="http://192.168.0.241:9153";var et=r(6054),er=r(3321),en=r(9829),es=r(336),el=r(1846),ei=r(9162);function eo(e){let{socket:t}=e,r=e=>(0,n.jsx)(er.Z,{...e,style:{width:"100%",height:"100%",borderRadius:15,backgroundColor:function(e,t){if(!e||void 0===e)return"rgba(255,255,255,0.2)";if("#"===e[0]){let r=e.substring(1),n=parseInt(r,16);return"rgba(".concat(n>>16&255,", ").concat(n>>8&255,", ").concat(255&n,", ").concat(t,")")}if(e.startsWith("rgb")){let r=e.match(/\d+/g);return"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(t,")")}return e}(e.backgroundColor,.8),backdropFilter:"blur(5px)"}}),s=e=>{let r={type:"keyPress",data:{key:e.keyName}};t.send(JSON.stringify(r))},l=[{label:"7",keyName:"NumPad7"},{label:"8",keyName:"NumPad8"},{label:"9",keyName:"NumPad9"},{label:"4",keyName:"NumPad4"},{label:"5",keyName:"NumPad5"},{label:"6",keyName:"NumPad6"},{label:"1",keyName:"NumPad1"},{label:"2",keyName:"NumPad2"},{label:"3",keyName:"NumPad3"},{label:"0",keyName:"NumPad0"},{label:".",keyName:"Period"}].map(e=>(0,n.jsx)(ei.ZP,{xs:"0"===e.label?8:4,item:!0,children:(0,n.jsx)(r,{variant:"contained",onClick:()=>{s(e)},children:e.label})},e.label));return(0,n.jsxs)(ei.ZP,{container:!0,item:!0,xs:12,direction:"column",children:[(0,n.jsx)(ei.ZP,{container:!0,item:!0,xs:1,children:[{label:"Backspace",keyName:"Backspace"},{label:"/",keyName:"Divide"},{label:"*",keyName:"Multiply"},{label:"-",keyName:"Minus"}].map(e=>(0,n.jsx)(ei.ZP,{xs:3,item:!0,children:(0,n.jsx)(r,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{s(e)},children:e.label})},e.keyName))}),(0,n.jsxs)(ei.ZP,{container:!0,item:!0,xs:!0,direction:"row",children:[(0,n.jsx)(ei.ZP,{container:!0,item:!0,xs:9,children:l}),(0,n.jsx)(ei.ZP,{item:!0,container:!0,xs:3,children:(0,n.jsx)(ei.ZP,{container:!0,xs:!0,direction:"column",item:!0,children:[{label:"+",keyName:"Add"},{label:"Enter",keyName:"Enter",backgroundColor:"rgb(225, 163, 91)"}].map(e=>(0,n.jsx)(ei.ZP,{xs:!0,item:!0,children:(0,n.jsx)(r,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{s(e)},children:e.label})},e.keyName))})})]})]})}var ea=r(1163);function ec(e,t,r){if(e===t||e<0||t<0)return{newArray:r,isModified:!1};let n=r.findIndex(t=>t.id===e),s=r.findIndex(e=>e.id===t);if(-1===n||-1===s)return{newArray:r,isModified:!1};let l=[...r],i=l[n];return l[n]=l[s],l[s]=i,{newArray:l,isModified:!0}}let ed="http://192.168.0.241:9153";function eu(e){let t=window.matchMedia("(any-hover: none)").matches,r=(0,ea.useRouter)(),s=r.query,[l,o]=i.useState(!1),[d,u]=i.useState(new Set(["file"])),[h,x]=i.useState(""),[y,p]=i.useState(""),[f,Z]=i.useState(null),[P,b]=i.useState(!1),[C,w]=i.useState(!1),[S,k]=i.useState(!1),[v,I]=i.useState(null),[N,E]=i.useState([]),[G,T]=i.useState(""),[B,L]=i.useState(!1),[H,W]=i.useState(-1),[_,U]=i.useState([]),[Y,$]=i.useState(null),ei=i.useMemo(()=>Array.from(d).join(", ").replaceAll("_"," "),[d]);(0,i.useEffect)(()=>{e.groupItems&&U(e.groupItems)},[e.groupItems]),(0,i.useEffect)(()=>{e.editing||W(-1)},[e.editing]);let eu=()=>{if(s.action&&"add"===s.action&&(o(!0),s.type)){let e=s.type;u(new Set([e]))}};(0,i.useEffect)(()=>{eu()},[s]);let eh=async()=>{b(!0);let e=await K();1===e.error?b(!1):0===e.error&&(Z(e.data),$(e.data),b(!1))},ex=(0,i.useCallback)(e=>{e.preventDefault(),"Shift"!==e.key||N.includes("Shift")?"Control"!==e.key||N.includes("Control")?"Alt"!==e.key||N.includes("Alt")?e.key&&G!==e.key&&!["Control","Shift","Alt"].includes(e.key)&&(e.code.includes("Digit")?T(e.code.replace("Digit","Num")):e.code.includes("Key")&&T(e.code.replace("Key",""))):E([...N,(e.code.includes("Left")?"Left":"Right")+"Alt"]):E([...N,(e.code.includes("Left")?"Left":"Right")+"Control"]):E([...N,(e.code.includes("Left")?"Left":"Right")+"Shift"])},[]);(0,i.useEffect)(()=>{""===h&&f&&x(f.name)},[f]);let em=e=>{let t="";if("keybind"===e.type){if(!e.icon)return(0,n.jsx)(el.Z,{style:{marginBottom:10,color:"white",width:30,height:30}});t=ed+"/icons/"+e.icon}return"file"===e.type?t=ed+"/icons/"+e.icon:"link"===e.type&&(t=e.icon.startsWith("http")?e.icon:ed+"/icons/"+e.icon),(0,n.jsx)(D.ZP,{src:t,style:{marginBottom:10,height:50,width:50,objectFit:"fill"}})},ej=()=>(0,n.jsxs)(R.ZP.Container,{direction:"row",wrap:"wrap",gap:1,children:[_.map((t,r)=>(0,n.jsx)(R.ZP,{draggable:e.editing,onDragStart:e=>{W(t.id)},onDragOver:e=>{e.preventDefault();let{newArray:r,isModified:n}=ec(H,t.id,_);n&&U(r)},onDragEnd:async e=>{W(-1),await Q(_)},xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex",overflow:"hidden",opacity:H===t.id?.5:1},children:(0,n.jsxs)(et.Z,{onClick:()=>{e.editing?(k(!0),I(t)):V(t.id)},style:{borderWidth:3,borderStyle:"solid",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",flexDirection:"column",flex:1,overflow:"hidden"},children:[e.editing&&(0,n.jsx)(g.Z,{onClick:e=>{e.stopPropagation(),w(!0),I(t)},color:"error",style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(es.Z,{fontSize:"small"})}),em(t),(0,n.jsx)(c.Z,{css:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",width:"calc(100% - 20px)"},children:t.name})]})},"groupItem"+r)),e.groupItems.length<20&&(0,n.jsx)(R.ZP,{xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex"},children:(0,n.jsx)(er.Z,{onClick:()=>{o(!0)},style:{display:"flex",borderWidth:3,borderStyle:"dashed",flex:1,borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(F.Z,{style:{color:"gray"}})})})]}),ey=()=>{o(!1),Z(null),x(""),p(""),u(new Set(["file"])),E([]),T(""),$(null)},eg=async()=>{let t,r=Y instanceof File;if(r&&0!==(t=await ee(Y)).error){e.setError(t);return}let n=await J({groupId:e.currentGroupId,name:h,url:y,type:d.values().next().value,selectedFile:f,keybind:N.join("+")+":"+G,icon:r?t.data:void 0});0===n.error?(ey(),e.getGroupItems(e.currentGroupId)):e.setError(n)},ep=()=>{w(!1)},ef=()=>{k(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.ZP,{variant:"bordered",css:{minHeight:"500px",flex:1},children:(()=>{switch(e.currentGroup.type){case"group":return ej();case"keypad":return(0,n.jsx)(eo,{socket:e.socket});default:return null}})()}),(0,n.jsxs)(z.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:l,onClose:ey,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Create a new group item"})}),(0,n.jsxs)(z.ZP.Body,{style:{alignItems:"center",justifyContent:"center"},children:[(0,n.jsxs)(R.ZP.Container,{alignItems:"center",gap:2,children:[(0,n.jsx)(R.ZP,{xs:4,justify:"flex-end",children:(0,n.jsx)(c.Z,{children:"Type"})}),(0,n.jsx)(R.ZP,{xs:8,justify:"center",children:(0,n.jsxs)(m.ZP,{children:[(0,n.jsx)(m.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:ei}),(0,n.jsxs)(m.ZP.Menu,{"aria-label":"Single selection actions",color:"primary",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:d,onSelectionChange:e=>{e.has("keybind")&&t?alert("Please set the keybinding on desktop"):u(e)},children:[(0,n.jsx)(m.ZP.Item,{children:"File"},"file"),(0,n.jsx)(m.ZP.Item,{children:"Link"},"link"),(0,n.jsx)(m.ZP.Item,{children:"Keybind"},"keybind")]})]})})]}),(0,n.jsxs)(R.ZP.Container,{alignItems:"center",gap:2,children:[(0,n.jsx)(R.ZP,{xs:4,justify:"flex-end",children:(0,n.jsx)(c.Z,{children:"Name"})}),(0,n.jsx)(R.ZP,{xs:8,justify:"center",children:(0,n.jsx)(M.ZP,{defaultValue:h,onChange:e=>{B||x(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]}),"file"===ei||"link"===ei?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(R.ZP.Container,{alignItems:"center",gap:2,children:[(0,n.jsx)(R.ZP,{xs:4,justify:"flex-end",children:(0,n.jsx)(c.Z,{children:"file"===ei?"Select File":"URL"})}),(0,n.jsx)(R.ZP,{xs:8,justify:"center",children:"file"===ei?f?(0,n.jsxs)(a.Z,{align:"center",justify:"center",children:[(0,n.jsx)(c.Z,{children:f.nameWithExtension}),(0,n.jsx)(g.Z,{style:{color:"white"},size:"small",onClick:()=>{Z(null)},children:(0,n.jsx)(en.Z,{fontSize:"inherit"})})]}):(0,n.jsx)(er.Z,{color:"primary",onClick:eh,children:"Browse"}):(0,n.jsx)(M.ZP,{onChange:e=>{p(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]})}):null,(()=>{if("keybind"!==ei)return null;let e=[...N,G].join("+");return(0,n.jsxs)(R.ZP.Container,{alignItems:"center",gap:2,children:[(0,n.jsx)(R.ZP,{xs:4,justify:"flex-end",children:(0,n.jsx)(c.Z,{children:"Keybind"})}),(0,n.jsx)(R.ZP,{xs:8,justify:"center",children:(0,n.jsx)(M.ZP,{readOnly:!0,value:e,bordered:!0,fullWidth:!0,contentRightStyling:!1})}),(0,n.jsx)(R.ZP,{xs:12,justify:"flex-end",style:{marginTop:-15},children:(0,n.jsx)(j.ZP,{size:"xs",color:B?"error":"primary",onPress:()=>{B?window.removeEventListener("keydown",ex):(E([]),T(""),window.addEventListener("keydown",ex)),L(!B)},children:B?"Stop Recording":"Start Recording"})})]})})(),(0,n.jsxs)(R.ZP.Container,{alignItems:"center",gap:2,children:[(0,n.jsx)(R.ZP,{xs:4,justify:"flex-end",children:(0,n.jsx)(c.Z,{children:"Icon"})}),(0,n.jsx)(R.ZP,{xs:8,justify:"center",children:(()=>{if(!Y)return(0,n.jsxs)(er.Z,{variant:"text",component:"label",color:"primary",children:["Upload Icon",(0,n.jsx)("input",{type:"file",hidden:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&(console.log(e.target.files[0]),$(e.target.files[0]))}})]});{let e=Y instanceof File,t=Y&&e?URL.createObjectURL(Y):"".concat(ed,"/icons/").concat(Y.icon);return(0,n.jsxs)(a.Z,{align:"center",justify:"center",children:[(0,n.jsx)(D.ZP,{src:t,width:50,height:50}),(0,n.jsx)(g.Z,{style:{color:"white"},size:"small",onClick:()=>{$(null)},children:(0,n.jsx)(en.Z,{fontSize:"inherit"})})]})}})()})]})]}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(er.Z,{color:"secondary",onClick:ey,children:"Close"}),(0,n.jsx)(er.Z,{color:"primary",onClick:eg,children:"Create"})]})]}),(0,n.jsx)(z.ZP,{"aria-labelledby":"waiting-for-file",open:P,preventClose:!0,onClose:()=>{b(!1)},children:(0,n.jsx)(z.ZP.Body,{children:(0,n.jsxs)(a.Z,{align:"center",justify:"center",children:[(0,n.jsx)(O.ZP,{}),(0,n.jsx)(c.Z,{style:{marginLeft:10},children:"Please select file on your PC..."})]})})}),(0,n.jsxs)(z.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:C,onClose:ep,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Delete Group Item"})}),(0,n.jsx)(z.ZP.Body,{style:{alignItems:"center"},children:(0,n.jsx)(c.Z,{children:"Are you sure you want to delete this group item?"})}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"secondary",onPress:ep,children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,color:"error",onPress:async()=>{0===(await q(v.id)).error&&e.getGroupItems(e.currentGroupId),w(!1)},children:"Delete"})]})]}),(0,n.jsxs)(z.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:S,onClose:ef,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Rename Item"})}),(0,n.jsx)(z.ZP.Body,{style:{alignItems:"center"},children:(0,n.jsx)(M.ZP,{placeholder:"Item name",bordered:!0,initialValue:v?v.name:"",onChange:e=>{I({...v,name:e.target.value})}})}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"secondary",onPress:ef,children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,color:"success",onPress:async()=>{let t=await X(v.id,v.name);0===t.error&&e.getGroupItems(e.currentGroupId),k(!1)},children:"Save"})]})]})]})}function eh(e){let[t,r]=i.useState(1),[s,l]=i.useState(!1),[o,a]=i.useState(null),[d,u]=i.useState(!1),[h,x]=i.useState(-1),[m,y]=i.useState([]);i.useEffect(()=>{e.groups&&e.groups.length>0&&(r(e.groups[0].id),y(e.groups),e.setCurrentGroupId(e.groups[0].id),e.setCurrentGroup(e.groups[0]))},[e.groups]);let p=async t=>{let n=t.id;r(n),e.setCurrentGroupId(n),e.setCurrentGroup(t)},f=()=>{l(!1)},Z=()=>{u(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.ZP,{variant:"bordered",css:{minHeight:"500px",justifyContent:"center",width:"100%",height:"100%"},children:(0,n.jsxs)(A.ZP.Body,{style:{alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},children:[m.map(r=>(0,n.jsxs)(et.Z,{draggable:e.editing,onDragStart:e=>{x(r.id)},onDragOver:e=>{e.preventDefault();let{newArray:t,isModified:n}=ec(h,r.id,m);n&&y(t)},onDragEnd:async e=>{x(-1),await $(m)},onClick:()=>{e.editing?(l(!0),a(r)):p(r)},style:{borderWidth:0,width:"100%",alignItems:"center",justifyContent:"center",borderRadius:10,height:"10%"},children:[(0,n.jsx)(c.Z,{color:t===r.id?"primary":"none",children:r.name}),e.editing&&(0,n.jsx)(g.Z,{onClick:e=>{e.stopPropagation(),u(!0),a(r)},color:"error",style:{position:"absolute",top:-10,right:-10},children:(0,n.jsx)(es.Z,{fontSize:"small"})})]},"group-"+r.id)),(0,n.jsx)(R.ZP,{children:(0,n.jsx)(er.Z,{onClick:()=>{e.showAddGroupModal()},style:{display:"flex",borderWidth:3,borderStyle:"dashed",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},children:(0,n.jsx)(F.Z,{style:{color:"gray"}})})})]})}),(0,n.jsxs)(z.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:s,onClose:f,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Rename Group"})}),(0,n.jsx)(z.ZP.Body,{style:{alignItems:"center"},children:(0,n.jsx)(M.ZP,{placeholder:"Group name",bordered:!0,initialValue:o?o.name:"",onChange:e=>{a({...o,name:e.target.value})}})}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"secondary",onPress:f,children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,color:"success",onPress:async()=>{let t=await U(o.id,o.name);0===t.error&&e.getGroups(),l(!1)},children:"Save"})]})]}),(0,n.jsxs)(z.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:d,onClose:Z,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Delete Group"})}),(0,n.jsxs)(z.ZP.Body,{style:{alignItems:"center"},children:[(0,n.jsx)(c.Z,{children:"Are you sure you want to delete this group?"}),(0,n.jsx)(c.Z,{color:"warning",children:"This will delete all items in the group as well"})]}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"secondary",onPress:Z,children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,color:"error",onPress:async()=>{0===(await Y(o.id)).error&&e.getGroups(e.currentGroupId),u(!1)},children:"Delete"})]})]})]})}ed="http://192.168.0.241:9153";var ex=r(5584),em=r(2765);function ej(e){let{socketMessage:t,socket:r,serverAlive:s}=e,o=(0,ea.useRouter)();o.query;let[d,u]=(0,i.useState)([]),[h,x]=(0,i.useState)([]),[y,g]=(0,i.useState)(!1),[p,f]=(0,i.useState)(""),[Z,P]=(0,i.useState)(1),[b,C]=(0,i.useState)(null),[w,S]=(0,i.useState)(!1),[k,N]=(0,i.useState)(!0),[E,G]=(0,i.useState)(!1),[T,F]=(0,i.useState)(!1),[D,O]=(0,i.useState)(!1),[L,J]=(0,i.useState)(new Set(["group"])),[K,V]=(0,i.useState)(null),q=(0,i.useMemo)(()=>Array.from(L).join(", ").replaceAll("_"," "),[L]),U=async()=>{let e=await H();0===e.error?(u(e.data),C(e.data[0])):V(e)},Y=async e=>{let t=await _(e);0===t.error?x(t.data):V(t)};(0,i.useEffect)(()=>{U()},[]),(0,i.useEffect)(()=>{O(!s)},[s]),(0,i.useEffect)(()=>{Y(Z)},[Z]);let X=()=>{g(!1),J(new Set(["group"]))},Q=async()=>{let e=await W(p,q);0===e.error?U():V(e),g(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:"Project Hub"}),(0,n.jsx)("meta",{name:"description",content:"Project Hub Frontend"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(B,{setEditing:S,editing:w,setShutdownModalVisible:G,socketMessage:t,socket:r,groupPanelExpanded:k,setGroupPanelExpanded:N,setRestartModalVisible:F,groups:d,currentGroupId:Z,setCurrentGroupId:P,setCurrentGroup:C,setVisible:g}),(0,n.jsx)(ei.ZP,{container:!0,style:{display:"flex",marginTop:10,paddingLeft:24,paddingRight:24,marginBottom:20,flex:1},children:(null==d?void 0:d.length)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.ZP,{css:{height:"100%",display:"none",marginRight:k?10:0,"@xs":{display:"inline"}},children:(0,n.jsx)(ex.Z,{sx:{justifyContent:"center",height:"100%"},in:k,orientation:"horizontal",children:(0,n.jsx)(eh,{editing:w,groups:d,setGroupItems:x,getGroups:U,setCurrentGroupId:P,setCurrentGroup:C,setGroupPanelExpanded:N,groupPanelExpanded:k,showAddGroupModal:()=>{g(!0)},setError:V})})}),(0,n.jsx)(ei.ZP,{xs:!0,item:!0,container:!0,marginLeft:0,children:(0,n.jsx)(eu,{editing:w,groupItems:h,currentGroup:b,getGroups:U,getGroupItems:Y,currentGroupId:Z,socket:r,setError:V})})]}):(0,n.jsx)(A.ZP,{isPressable:!0,isHoverable:!0,onClick:()=>{g(!0)},variant:"bordered",css:{minHeight:"500px",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(A.ZP.Body,{children:(0,n.jsx)(c.Z,{children:"Click here to add your first group"})})})}),(0,n.jsxs)(z.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:y,onClose:X,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Create a new group"})}),(0,n.jsxs)(z.ZP.Body,{children:[(0,n.jsxs)(ei.ZP,{container:!0,alignItems:"center",children:[(0,n.jsx)(ei.ZP,{item:!0,xs:6,md:6,container:!0,justifyContent:"center",children:(0,n.jsx)(c.Z,{children:"Type"})}),(0,n.jsx)(ei.ZP,{item:!0,xs:6,md:6,children:(0,n.jsxs)(m.ZP,{children:[(0,n.jsx)(m.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:q}),(0,n.jsxs)(m.ZP.Menu,{"aria-label":"Single selection actions",color:"primary",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:L,onSelectionChange:e=>{J(e)},children:[(0,n.jsx)(m.ZP.Item,{children:"Group"},"group"),(0,n.jsx)(m.ZP.Item,{children:"Keypad"},"keypad")]})]})})]}),(0,n.jsx)(M.ZP,{onChange:e=>{f(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"lg",placeholder:"Group Name"})]}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"error",onPress:X,children:"Close"}),(0,n.jsx)(j.ZP,{auto:!0,onPress:Q,children:"Create"})]})]}),(0,n.jsxs)(z.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:E,onClose:()=>{G(!1)},children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Shut down your computer?"})}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{G(!1)},children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,onPress:()=>{v()},children:"Confirm"})]})]}),(0,n.jsxs)(z.ZP,{closeButton:!0,"aria-labelledby":"restart-modal",open:T,onClose:()=>{F(!1)},children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"modal-title",size:18,children:"Restart your computer?"})}),(0,n.jsxs)(z.ZP.Footer,{children:[(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{F(!1)},children:"Cancel"}),(0,n.jsx)(j.ZP,{auto:!0,onPress:()=>{I()},children:"Confirm"})]})]}),(0,n.jsxs)(z.ZP,{"aria-labelledby":"modal-title",preventClose:!0,blur:!0,open:D,onClose:()=>{O(!1)},children:[(0,n.jsxs)(z.ZP.Header,{children:[(0,n.jsx)(em.Z,{sx:{fontSize:20,marginRight:0}}),(0,n.jsx)(c.Z,{id:"modal-title",size:18,style:{marginLeft:5},children:"Disconnected"})]}),(0,n.jsx)(z.ZP.Body,{children:(0,n.jsx)(c.Z,{children:"Please restart Project Hub server and refresh the page."})})]}),(0,n.jsxs)(z.ZP,{closeButton:!0,"aria-labelledby":"Error",open:null!==K,onClose:X,children:[(0,n.jsx)(z.ZP.Header,{children:(0,n.jsx)(c.Z,{id:"error-modal-title",size:18,children:"Error"})}),(0,n.jsx)(z.ZP.Body,{children:(0,n.jsx)(a.Z,{justify:"center",children:(0,n.jsx)(c.Z,{children:null==K?void 0:K.message})})}),(0,n.jsx)(z.ZP.Footer,{children:(0,n.jsx)(j.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{V(null)},children:"Close"})})]})]})}}},function(e){e.O(0,[913,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);