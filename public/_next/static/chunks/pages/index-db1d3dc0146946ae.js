(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8071)}])},9515:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/missionControlSymbol.ea45c0cf.png",height:1028,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAW0lEQVR42m2NoQ2AQAxFe1eGAY3FY5EoNGhGYAuGuTnAo1iB5EGbk1ybJ/qS/i8iKJVtNFSKw8DCTMvOlkXi5jL5cPoZjJqOhpfDRTRWEj0TY34J/9iIErxc5APd3y+rGJgZ/AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},8071:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eH}});var r=n(5893),o=n(9008),i=n.n(o),a=n(7294),s=n(6249),l=n(1765),c=n(4040),d=n(6979),u=n(5453),h=n(5650),m=n(7690),p=n(7976),x=n(3946),g=n(7957),y=n(685),j=n(135),f=n(6540),Z=n(9797),b=n.n(Z),C=n(6886),P=n(9527);async function w(e,t){try{let n=await fetch(e,t);if(!n)return{error:1,data:null,message:"No response from server"};{let e=await n.json();return e}}catch(e){return{error:1,data:null,message:e.message}}}let S="http://192.168.0.244:9153";async function k(){let e=await w("".concat(S,"/headerComponent"));return e}async function B(e,t,n,r,o){let i=await w("".concat(S,"/headerComponent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,order:t,customInfo:n,bondType:r,bondInfo:o})});return i}async function v(e){let t=await w("".concat(S,"/headerComponent/").concat(e),{method:"DELETE"});return t}async function I(e){let t=await w("".concat(S,"/headerComponent/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({components:e})});return t}async function D(e){let t=await w("".concat(S,"/headerComponent/execute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t}S=window.location.origin;var E=n(5675),A=n.n(E);let N=(0,P.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),T=(0,P.ZP)("div")({flexDirection:"row",display:"flex"});function G(e){return(0,r.jsx)(T,{style:{width:50,justifyContent:"center"},children:(0,r.jsx)(N,{children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"missionControl"})},size:"small",style:{color:"white"},children:(0,r.jsx)(A(),{src:n(9515),width:20,height:20,alt:"missionControlSymbol"})})})})}let z=e=>{let t=a.useRef(),n=a.useRef(),r=o=>{if(void 0!=n.current){let t=o-n.current;e(t)}n.current=o,t.current=requestAnimationFrame(r)};a.useEffect(()=>(t.current=requestAnimationFrame(r),()=>cancelAnimationFrame(t.current)),[])};var F=n(2495);function R(){let[e,t]=a.useState("");z(()=>{t(n())});let n=()=>{let e=new Date,t=10>e.getHours()?"0".concat(e.getHours()):e.getHours(),n=10>e.getMinutes()?"0".concat(e.getMinutes()):e.getMinutes(),r=10>e.getSeconds()?"0".concat(e.getSeconds()):e.getSeconds(),o="".concat(t,":").concat(n,":").concat(r);return o};return(0,r.jsx)("div",{style:{width:80,justifyContent:"center",alignItems:"center",display:"flex"},children:(0,r.jsx)(F.ZP,{content:(()=>{let e=new Date,t=10>e.getDate()?"0".concat(e.getDate()):e.getDate(),n=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=10>e.getFullYear()?"0".concat(e.getFullYear()):e.getFullYear(),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],i="".concat(r,"-").concat(n,"-").concat(t," ").concat(o);return i})(),rounded:!0,placement:"bottom",children:(0,r.jsx)(d.Z,{b:!0,color:"inherit",hideIn:"xs",children:e})})})}var O=n(5861),L=n(6562);let M="customText";function W(e){let{text:t,onChangeText:n,editable:o}=e,[i,s]=a.useState(!1);return(0,r.jsx)("div",{onClick:()=>{o&&s(!0)},style:{width:110,height:30,justifyContent:"center",alignItems:"center",overflow:"hidden",display:"flex"},children:i?(0,r.jsx)(L.ZP,{style:{width:110,textAlign:"center",fontSize:16},shadow:!1,initialValue:t,onChange:e=>{n&&n(e.target.value)},onBlur:()=>{s(!1)}}):(0,r.jsx)(O.Z,{textOverflow:"ellipsis",overflow:"hidden",children:t})})}var H=n(6340),_=n(5924),J=n(9066);let K=(0,P.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),V=(0,P.ZP)("div")({flexDirection:"row",display:"flex"});function U(e){return(0,r.jsxs)(V,{style:{width:120,justifyContent:"center"},children:[(0,r.jsx)(K,{children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"volume",action:"mute"})},size:"small",style:{color:"white"},children:(0,r.jsx)(_.Z,{fontSize:"small"})})}),(0,r.jsx)(K,{style:{marginLeft:3},children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"volume",action:"down"})},size:"small",style:{color:"white"},children:(0,r.jsx)(J.Z,{fontSize:"small"})})}),(0,r.jsx)(K,{style:{marginLeft:3},children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"volume",action:"up"})},size:"small",style:{color:"white"},children:(0,r.jsx)(H.Z,{fontSize:"small"})})})]})}var Y=n(7506);function q(e,t,n){if(e===t||e<0||t<0)return{newArray:n,isModified:!1};let r=[...n],o=r[e];return r[e]=r[t],r[t]=o,{newArray:r,isModified:!0}}async function Q(e,t,n,r){e.preventDefault();let o=n.touchBarComponents.findIndex(e=>e.type===n.currentDraggingComponent.type),{newArray:i,isModified:a}=q(o,r,n.touchBarComponents);a&&t({touchBarComponents:i,currentDraggingComponent:{...n.currentDraggingComponent,index:r}})}async function X(e,t,n){t({touchBarFull:!1});let r=n.currentDraggingComponent;if(r.from===r.currentLocation){await I(n.touchBarComponents);return}if("touchBarSetting"===r.from&&"touchBar"===r.currentLocation){let e=[...n.touchBarComponents],o=e.findIndex(e=>e.type===r.type);e[o].isDummy=!1,t({touchBarComponents:e});let i=await B(r.type,o,r.text,void 0,void 0);console.log(i),e[o].id=i.data.id,console.log("touchBarComponents",e),t({touchBarComponents:e}),await I(e)}if("touchBar"===r.from&&"touchBarSetting"===r.currentLocation){let e=[...n.touchBarSettingComponents];e[e.findIndex(e=>e.type===r.type)].isDummy=!1,t({touchBarSettingComponents:e,touchBarComponents:n.touchBarComponents.filter(e=>e.type!==r.type)}),await v(n.currentDraggingComponent.id),await I(n.touchBarComponents)}}var $=n(655),ee=n(3247),et=n(2709),en=n(5397);let er=(0,P.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),eo=(0,P.ZP)("div")({flexDirection:"row",display:"flex"});function ei(e){return(0,r.jsxs)(eo,{style:{width:150,justifyContent:"center"},children:[(0,r.jsx)(er,{children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"mediaControl",action:"previous"})},size:"small",style:{color:"white"},children:(0,r.jsx)(et.Z,{fontSize:"small"})})}),(0,r.jsx)(er,{style:{marginLeft:3},children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"mediaControl",action:"play"})},size:"small",style:{color:"white"},children:(0,r.jsx)($.Z,{fontSize:"small"})})}),(0,r.jsx)(er,{style:{marginLeft:3},children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"mediaControl",action:"pause"})},style:{color:"white"},size:"small",children:(0,r.jsx)(ee.Z,{fontSize:"small"})})}),(0,r.jsx)(er,{style:{marginLeft:3},children:(0,r.jsx)(x.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await D({type:"mediaControl",action:"next"})},size:"small",style:{color:"white"},children:(0,r.jsx)(en.Z,{fontSize:"small"})})})]})}let ea=(0,P.ZP)("div")({borderRadius:5,paddingTop:10,paddingBottom:10});var es=function(e){let{globalStore:t,dispatch:n}=a.useContext(Y.e),o=a.useRef(null);a.useEffect(()=>{let e=async()=>{let e=await k();if(0===e.error){var r;let o;let{touchBarComponents:i,touchBarSettingComponents:a}=(r=e.data,o=[...t.touchBarSettingComponents],{touchBarComponents:r.map(e=>{o.find(t=>{t.type===e.type&&(t.isDummy=!0)});let t=0;switch(e.type){case"clock":t=80;break;case"customText":t=110;break;case"screenSwitcher":t=50}return{id:e.id,type:e.type,width:t,from:"touchBar",currentLocation:"touchBar",isDummy:!1,text:e.customInfo}}),touchBarSettingComponents:o});n({touchBarComponents:i,touchBarSettingComponents:a})}};e()},[]),a.useEffect(()=>{o.current&&n({touchBarWidth:o.current.offsetWidth})},[o]);let i=(e,n,o)=>{if(n)return(0,r.jsx)(ea,{style:{width:t.currentDraggingComponent.width,backgroundColor:"#2b2b2b",height:30}});switch(e){case"clock":return(0,r.jsx)(R,{});case"customText":return(0,r.jsx)(W,{text:o||"",editable:!1});case"screenSwitcher":return(0,r.jsx)(G,{disabled:!1});case"mediaControl":return(0,r.jsx)(ei,{disabled:!1});case"volumeControl":return(0,r.jsx)(U,{disabled:!1});default:return null}};return(0,r.jsx)(C.ZP,{ref:o,container:!0,flexDirection:"row",alignItems:"center",height:50,paddingLeft:1,paddingRight:1,style:{backgroundColor:e.editing?"#303030":"transparent",borderRadius:10},onDragOver:e=>(function(e,t,n){e.preventDefault();let r=n.touchBarComponents.reduce((e,t)=>e+t.width,0)+n.currentDraggingComponent.width;if(r>n.touchBarWidth&&!n.touchBarFull)t({touchBarFull:!0});else if(r<=n.touchBarWidth&&(t({touchBarFull:!1}),"touchBarSetting"===n.currentDraggingComponent.from&&!n.touchBarComponents.find(e=>e.isDummy))){let e=[...n.touchBarSettingComponents];e[e.findIndex(e=>e.type===n.currentDraggingComponent.type)].isDummy=!0,t({touchBarComponents:[...n.touchBarComponents,{...n.currentDraggingComponent,isDummy:!0}],touchBarSettingComponents:e,currentDraggingComponent:{...n.currentDraggingComponent,currentLocation:"touchBar"}})}})(e,n,t),className:t.touchBarFull?b().shake:"",children:t.touchBarComponents.map((o,a)=>(0,r.jsx)(ea,{draggable:e.editing,onDragStart:e=>{var t;n({currentDraggingComponent:{id:(t={id:o.id,index:a,type:o.type,width:o.width,from:"touchBar"}).id,type:t.type,width:t.width,from:"touchBar",currentLocation:"touchBar",isDummy:!1}})},onDragOver:e=>{Q(e,n,t,a)},onDragEnd:e=>{X(e,n,t)},children:i(o.type,o.isDummy,o.text)},"touchBarComponent:"+a))})};let el=(0,P.ZP)("div")({backgroundColor:"#303030",borderRadius:5,paddingTop:10,paddingBottom:10});function ec(e){let{globalStore:t,dispatch:n}=a.useContext(Y.e),o=(e,o,i,a,s,l,c)=>(0,r.jsxs)(C.ZP,{item:!0,alignItems:"center",container:!0,direction:"column",xs:3,children:[(0,r.jsx)(el,{style:{width:a,opacity:l?0:1},draggable:!l,onDragStart:t=>{var r;n({currentDraggingComponent:{type:(r={index:e,type:i,width:a,from:"touchBarSetting",text:c}).type,width:r.width,from:"touchBarSetting",currentLocation:"touchBarSetting",isDummy:!1,text:r.text}})},onDragEnd:e=>{X(e,n,t)},children:o}),(0,r.jsx)(O.Z,{children:s})]},"touchBarSettingComponent"+e);return(0,r.jsx)(C.ZP,{container:!0,columnSpacing:2,alignItems:"center",flexWrap:"wrap",rowSpacing:3,justifyContent:"space-between",onDragOver:e=>(function(e,t,n){if(e.preventDefault(),n.touchBarSettingComponents.find(e=>e.isDummy)){let e=[...n.touchBarSettingComponents];e.find(e=>e.type===n.currentDraggingComponent.type).isDummy=!1,t({touchBarComponents:n.touchBarComponents.filter(e=>!e.isDummy),touchBarSettingComponents:e,currentDraggingComponent:{...n.currentDraggingComponent,currentLocation:"touchBarSetting"}})}})(e,n,t),children:t.touchBarSettingComponents.map((e,i)=>{let a=null,s=0;switch(e.type){case"clock":a=(0,r.jsx)(R,{}),s=80;break;case M:a=(0,r.jsx)(W,{text:e.text,editable:!0,onChangeText:e=>{let r=[...t.touchBarSettingComponents],o=r.findIndex(e=>e.type===M);r[o].text=e,n({touchBarSettingComponents:r})}}),s=110;break;case"screenSwitcher":a=(0,r.jsx)(G,{disabled:!0}),s=50;break;case"mediaControl":a=(0,r.jsx)(ei,{disabled:!0}),s=150;break;case"volumeControl":a=(0,r.jsx)(U,{disabled:!0}),s=120;break;default:a=null}return o(i,a,e.type,s,e.name,e.isDummy,e.text)})})}function ed(e){let{setEditing:t,editing:n,setShutdownModalVisible:o,socketMessage:i,socket:Z,groupPanelExpanded:b,setGroupPanelExpanded:C,setRestartModalVisible:P,groups:w,currentGroupId:S,setCurrentGroup:k,setCurrentGroupId:B,setVisible:v}=e;(0,s.Z)();let[I,D]=a.useState(0),[E,A]=a.useState(0),[N,T]=a.useState(!1),[G,z]=a.useState(!1),F=a.useRef(null),R=()=>{z(!1)};return(0,r.jsxs)(u.ZP,{isBordered:!0,variant:"floating",maxWidth:"fluid",css:{zIndex:G?1e4:100},children:[(0,r.jsx)(u.ZP.Toggle,{ref:F,showIn:"xs"}),(0,r.jsx)(u.ZP.Content,{css:{display:"none","@xs":{display:"flex"},alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(x.Z,{onClick:()=>{C(!b)},children:(0,r.jsx)(y.Z,{style:{color:"white",transform:"rotate(".concat(b?"0deg":"180deg",")")}})})}),(0,r.jsx)(u.ZP.Content,{css:{flex:1,marginLeft:10,display:"none","@xs":{display:"flex"}},children:(0,r.jsx)(es,{editing:G})}),(0,r.jsx)(u.ZP.Content,{css:{"@xs":{jc:"flex-end"}},children:(()=>{let e=[(0,r.jsx)(l.ZP.Item,{color:n?"success":"primary",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(g.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"none",marginLeft:5},children:n?"Done":"Edit"})]})},"edit")];return n&&e.unshift((0,r.jsx)(l.ZP.Item,{color:"primary",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"none",marginLeft:5},children:"Edit Touchbar"})]})},"touchBarSetting")),(0,r.jsxs)(l.ZP,{placement:"bottom-right",children:[(0,r.jsx)(u.ZP.Item,{children:(0,r.jsx)(l.ZP.Trigger,{children:(0,r.jsx)(x.Z,{style:{color:"white"},children:(0,r.jsx)(p.Z,{})})})}),(0,r.jsx)(l.ZP.Menu,{"aria-label":"Actions",color:"secondary",onAction:e=>{switch(e){case"edit":t(!n);break;case"touchBarSetting":z(!0)}},children:e})]})})()}),(0,r.jsxs)(u.ZP.Collapse,{disableAnimation:!0,children:[null==w?void 0:w.map((e,t)=>(0,r.jsx)(u.ZP.CollapseItem,{children:(0,r.jsx)(m.ZP,{color:S===e.id?"primary":"secondary",onPress:()=>{if(F.current){var t;null===(t=F.current)||void 0===t||t.click()}B(e.id),k(e)},ghost:!0,css:{minWidth:"100%"},href:"#",children:e.name})},"headerGroupItem:"+e.id)),(0,r.jsx)(u.ZP.CollapseItem,{children:(0,r.jsx)(m.ZP,{onPress:()=>{if(F.current){var e;null===(e=F.current)||void 0===e||e.click()}v(!0)},css:{minWidth:"100%",borderColor:"grey",backgroundColor:"transparent"},ghost:!0,children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"TouchBar Setting",open:G,onClose:R,blur:!0,width:"lg",children:[(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(ec,{})}),(0,r.jsx)(h.ZP.Footer,{})]})]})}var eu=n(9837),eh=n(2553),em=n(7501),ep=n(8773);let ex="http://192.168.0.244:9153";async function eg(){let e=await w("".concat(ex,"/group"));return e}async function ey(e,t){let n=await w("".concat(ex,"/group"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,type:t})});return n}async function ej(e){let t=await w("".concat(ex,"/groupItem/").concat(e));return t}async function ef(e){let{groupId:t,name:n,type:r,selectedFile:o,url:i,keybind:a,icon:s}=e,l=await w("".concat(ex,"/groupItem/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,type:r,selectedFile:o,url:i,keybind:a,icon:s})});return l}async function eZ(){let e=await w("".concat(ex,"/requestFileSelection"));return e}async function eb(e){let t=await w("".concat(ex,"/groupItem/execute/").concat(e));return t}async function eC(e){let t=await w("".concat(ex,"/groupItem/").concat(e),{method:"DELETE"});return t}async function eP(e,t){let n=await w("".concat(ex,"/group/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return n}async function ew(e){let t=await w("".concat(ex,"/group/").concat(e),{method:"DELETE"});return t}async function eS(e,t){let n=await w("".concat(ex,"/groupItem/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return n}async function ek(e){let t=await w("".concat(ex,"/groupItem/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupItems:e})});return t}async function eB(e){let t=await w("".concat(ex,"/group/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:e})});return t}async function ev(e){let t=new FormData;t.append("file",e);let n=await w("".concat(ex,"/upload/icon"),{method:"POST",body:t});return n}ex=window.location.origin;var eI=n(6054),eD=n(3321),eE=n(9829),eA=n(336),eN=n(1846);function eT(e){let{socket:t}=e,n=e=>(0,r.jsx)(eD.Z,{...e,style:{width:"100%",height:"100%",borderRadius:15,backgroundColor:function(e,t){if(!e||void 0===e)return"rgba(255,255,255,0.2)";if("#"===e[0]){let n=e.substring(1),r=parseInt(n,16);return"rgba(".concat(r>>16&255,", ").concat(r>>8&255,", ").concat(255&r,", ").concat(t,")")}if(e.startsWith("rgb")){let n=e.match(/\d+/g);return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(t,")")}return e}(e.backgroundColor,.8),backdropFilter:"blur(5px)"}}),o=e=>{let n={type:"keyPress",data:{key:e.keyName}};t.send(JSON.stringify(n))},i=[{label:"7",keyName:"NumPad7"},{label:"8",keyName:"NumPad8"},{label:"9",keyName:"NumPad9"},{label:"4",keyName:"NumPad4"},{label:"5",keyName:"NumPad5"},{label:"6",keyName:"NumPad6"},{label:"1",keyName:"NumPad1"},{label:"2",keyName:"NumPad2"},{label:"3",keyName:"NumPad3"},{label:"0",keyName:"NumPad0"},{label:".",keyName:"Period"}].map(e=>(0,r.jsx)(C.ZP,{xs:"0"===e.label?8:4,item:!0,children:(0,r.jsx)(n,{variant:"contained",onClick:()=>{o(e)},children:e.label})},e.label));return(0,r.jsxs)(C.ZP,{container:!0,item:!0,xs:12,direction:"column",children:[(0,r.jsx)(C.ZP,{container:!0,item:!0,xs:1,children:[{label:"Backspace",keyName:"Backspace"},{label:"/",keyName:"Divide"},{label:"*",keyName:"Multiply"},{label:"-",keyName:"Minus"}].map(e=>(0,r.jsx)(C.ZP,{xs:3,item:!0,children:(0,r.jsx)(n,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{o(e)},children:e.label})},e.keyName))}),(0,r.jsxs)(C.ZP,{container:!0,item:!0,xs:!0,direction:"row",children:[(0,r.jsx)(C.ZP,{container:!0,item:!0,xs:9,children:i}),(0,r.jsx)(C.ZP,{item:!0,container:!0,xs:3,children:(0,r.jsx)(C.ZP,{container:!0,xs:!0,direction:"column",item:!0,children:[{label:"+",keyName:"Add"},{label:"Enter",keyName:"Enter",backgroundColor:"rgb(225, 163, 91)"}].map(e=>(0,r.jsx)(C.ZP,{xs:!0,item:!0,children:(0,r.jsx)(n,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{o(e)},children:e.label})},e.keyName))})})]})]})}var eG=n(1163);function ez(e){let t=window.location.origin,n=window.matchMedia("(any-hover: none)").matches,o=(0,eG.useRouter)(),i=o.query,[s,u]=a.useState(!1),[p,g]=a.useState(new Set(["file"])),[y,j]=a.useState(""),[Z,b]=a.useState(""),[C,P]=a.useState(null),[w,S]=a.useState(!1),[k,B]=a.useState(!1),[v,I]=a.useState(!1),[D,E]=a.useState(null),[A,N]=a.useState([]),[T,G]=a.useState(""),[z,F]=a.useState(!1),[R,O]=a.useState(-1),[M,W]=a.useState([]),[H,_]=a.useState(null),J=a.useMemo(()=>Array.from(p).join(", ").replaceAll("_"," "),[p]);(0,a.useEffect)(()=>{e.groupItems&&W(e.groupItems)},[e.groupItems]),(0,a.useEffect)(()=>{e.editing||O(-1)},[e.editing]);let K=()=>{if(i.action&&"add"===i.action&&(u(!0),i.type)){let e=i.type;g(new Set([e]))}};(0,a.useEffect)(()=>{K()},[i]);let V=async()=>{S(!0);let e=await eZ();1===e.error?S(!1):0===e.error&&(P(e.data),_(e.data),S(!1))},U=(0,a.useCallback)(e=>{e.preventDefault();let t=[];e.ctrlKey&&t.push("Control"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Command"),[16,17,18,91,93].includes(e.keyCode)?G(""):(e.code.includes("Digit")?G(e.code.replace("Digit","Num")):e.code.includes("Key")&&G(e.code.replace("Key","")),N(t))},[]);(0,a.useEffect)(()=>{""===y&&C&&j(C.name)},[C]);let Y=e=>{let n="";if("keybind"===e.type){if(!e.icon)return(0,r.jsx)(eN.Z,{style:{marginBottom:10,color:"white",width:30,height:30}});n=t+"/icons/"+e.icon}return"file"===e.type?n=t+"/icons/"+e.icon:"link"===e.type&&(n=e.icon.startsWith("http")?e.icon:t+"/icons/"+e.icon),(0,r.jsx)(eu.ZP,{src:n,style:{marginBottom:10,height:50,width:50,objectFit:"fill"}})},Q=()=>(0,r.jsxs)(eh.ZP.Container,{direction:"row",wrap:"wrap",gap:1,children:[M.map((t,n)=>(0,r.jsx)(eh.ZP,{draggable:e.editing,onDragStart:e=>{O(n)},onDragOver:e=>{e.preventDefault();let{newArray:t,isModified:r}=q(R,n,M);r&&(O(n),W(t))},onDragEnd:async e=>{O(-1),await ek(M)},xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex",overflow:"hidden",opacity:R===n?.5:1},children:(0,r.jsxs)(eI.Z,{onClick:()=>{e.editing?(I(!0),E(t)):eb(t.id)},style:{borderWidth:3,borderStyle:"solid",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",flexDirection:"column",flex:1,overflow:"hidden"},children:[e.editing&&(0,r.jsx)(x.Z,{onClick:e=>{e.stopPropagation(),B(!0),E(t)},color:"error",style:{position:"absolute",top:0,right:0},children:(0,r.jsx)(eA.Z,{fontSize:"small"})}),Y(t),(0,r.jsx)(d.Z,{css:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",width:"calc(100% - 20px)"},children:t.name})]})},"groupItem"+n)),e.groupItems.length<20&&(0,r.jsx)(eh.ZP,{xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex"},children:(0,r.jsx)(eD.Z,{onClick:()=>{u(!0)},style:{display:"flex",borderWidth:3,borderStyle:"dashed",flex:1,borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]}),X=()=>{u(!1),P(null),j(""),b(""),g(new Set(["file"])),N([]),G(""),_(null)},$=async()=>{let t,n=H instanceof File;if(n&&0!==(t=await ev(H)).error){e.setError(t);return}let r=await ef({groupId:e.currentGroupId,name:y,url:Z,type:p.values().next().value,selectedFile:C,keybind:A.join("+")+":"+T,icon:n?t.data:void 0});0===r.error?(X(),e.getGroupItems(e.currentGroupId)):e.setError(r)},ee=()=>{B(!1)},et=()=>{I(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep.ZP,{variant:"bordered",css:{minHeight:"500px",flex:1},children:(()=>{switch(e.currentGroup.type){case"group":return Q();case"keypad":return(0,r.jsx)(eT,{socket:e.socket});default:return null}})()}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"Group item create modal",open:s,onClose:X,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"createGroupItem",size:18,children:"Create a new group item"})}),(0,r.jsxs)(h.ZP.Body,{style:{alignItems:"center",justifyContent:"center"},children:[(0,r.jsxs)(eh.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eh.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Type"})}),(0,r.jsx)(eh.ZP,{xs:8,justify:"center",children:(0,r.jsxs)(l.ZP,{children:[(0,r.jsx)(l.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:J}),(0,r.jsxs)(l.ZP.Menu,{"aria-label":"Group item type selection",color:"primary",disallowEmptySelection:!0,selectionMode:"single",onSelectionChange:e=>{e.has("keybind")&&n?alert("Please set the keybinding on desktop"):g(e)},children:[(0,r.jsx)(l.ZP.Item,{"aria-label":"File",children:"File"},"file"),(0,r.jsx)(l.ZP.Item,{"aria-label":"Link",children:"Link"},"link"),(0,r.jsx)(l.ZP.Item,{"aria-label":"Keybind",children:"Keybind"},"keybind")]})]})})]}),(0,r.jsxs)(eh.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eh.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Name"})}),(0,r.jsx)(eh.ZP,{xs:8,justify:"center",children:(0,r.jsx)(L.ZP,{defaultValue:y,onChange:e=>{z||j(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]}),"file"===J||"link"===J?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(eh.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eh.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"file"===J?"Select File":"URL"})}),(0,r.jsx)(eh.ZP,{xs:8,justify:"center",children:"file"===J?C?(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(d.Z,{children:C.nameWithExtension}),(0,r.jsx)(x.Z,{style:{color:"white"},size:"small",onClick:()=>{P(null)},children:(0,r.jsx)(eE.Z,{fontSize:"inherit"})})]}):(0,r.jsx)(eD.Z,{color:"primary",onClick:V,children:"Browse"}):(0,r.jsx)(L.ZP,{onChange:e=>{b(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]})}):null,(()=>{if("keybind"!==J)return null;console.log(A);let e=[...A,T].join("+");return(0,r.jsxs)(eh.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eh.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Keybind"})}),(0,r.jsx)(eh.ZP,{xs:8,justify:"center",children:(0,r.jsx)(L.ZP,{readOnly:!0,value:e,bordered:!0,fullWidth:!0,contentRightStyling:!1})}),(0,r.jsx)(eh.ZP,{xs:12,justify:"flex-end",style:{marginTop:-15},children:(0,r.jsx)(m.ZP,{size:"xs",color:z?"error":"primary",onPress:()=>{z?window.removeEventListener("keydown",U):(N([]),G(""),window.addEventListener("keydown",U)),F(!z)},children:z?"Stop Recording":"Start Recording"})})]})})(),(0,r.jsxs)(eh.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eh.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Icon"})}),(0,r.jsx)(eh.ZP,{xs:8,justify:"center",children:(()=>{if(!H)return(0,r.jsxs)(eD.Z,{variant:"text",component:"label",color:"primary",children:["Upload Icon",(0,r.jsx)("input",{type:"file",hidden:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&(console.log(e.target.files[0]),_(e.target.files[0]))}})]});{let e=H instanceof File,n=H&&e?URL.createObjectURL(H):"".concat(t,"/icons/").concat(H.icon);return(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(eu.ZP,{src:n,width:50,height:50}),(0,r.jsx)(x.Z,{style:{color:"white"},size:"small",onClick:()=>{_(null)},children:(0,r.jsx)(eE.Z,{fontSize:"inherit"})})]})}})()})]})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(eD.Z,{color:"secondary",onClick:X,children:"Close"}),(0,r.jsx)(eD.Z,{color:"primary",onClick:$,children:"Create"})]})]}),(0,r.jsx)(h.ZP,{"aria-labelledby":"waiting-for-file",open:w,preventClose:!0,onClose:()=>{S(!1)},children:(0,r.jsx)(h.ZP.Body,{children:(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(em.ZP,{}),(0,r.jsx)(d.Z,{style:{marginLeft:10},children:"Please select file on your PC..."})]})})}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:k,onClose:ee,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Delete Group Item"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(d.Z,{children:"Are you sure you want to delete this group item?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:ee,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"error",onPress:async()=>{0===(await eC(D.id)).error&&e.getGroupItems(e.currentGroupId),B(!1)},children:"Delete"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:v,onClose:et,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Rename Item"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(L.ZP,{placeholder:"Item name",bordered:!0,initialValue:D?D.name:"",onChange:e=>{E({...D,name:e.target.value})}})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:et,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"success",onPress:async()=>{let t=await eS(D.id,D.name);0===t.error&&e.getGroupItems(e.currentGroupId),I(!1)},children:"Save"})]})]})]})}function eF(e){let[t,n]=a.useState(1),[o,i]=a.useState(!1),[s,l]=a.useState(null),[c,u]=a.useState(!1),[p,g]=a.useState(-1),[y,j]=a.useState([]);a.useEffect(()=>{e.groups&&e.groups.length>0&&(n(e.groups[0].id),j(e.groups),e.setCurrentGroupId(e.groups[0].id),e.setCurrentGroup(e.groups[0]))},[e.groups]);let Z=async t=>{let r=t.id;n(r),e.setCurrentGroupId(r),e.setCurrentGroup(t)},b=()=>{i(!1)},C=()=>{u(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep.ZP,{variant:"bordered",css:{minHeight:"500px",justifyContent:"center",width:"100%",height:"100%"},children:(0,r.jsxs)(ep.ZP.Body,{style:{alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},children:[y.map((n,o)=>(0,r.jsxs)(eI.Z,{draggable:e.editing,onDragStart:e=>{g(o)},onDragOver:e=>{e.preventDefault();let{newArray:t,isModified:n}=q(p,o,y);n&&(g(o),j(t))},onDragEnd:async e=>{g(-1),await eB(y)},onClick:()=>{e.editing?(i(!0),l(n)):Z(n)},style:{borderWidth:0,width:"100%",alignItems:"center",justifyContent:"center",borderRadius:10,height:"10%"},children:[(0,r.jsx)(d.Z,{color:t===n.id?"primary":"none",children:n.name}),e.editing&&(0,r.jsx)(x.Z,{onClick:e=>{e.stopPropagation(),u(!0),l(n)},color:"error",style:{position:"absolute",top:-10,right:-10},children:(0,r.jsx)(eA.Z,{fontSize:"small"})})]},"group-"+n.id)),(0,r.jsx)(eh.ZP,{children:(0,r.jsx)(eD.Z,{onClick:()=>{e.showAddGroupModal()},style:{display:"flex",borderWidth:3,borderStyle:"dashed",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]})}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:o,onClose:b,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Rename Group"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(L.ZP,{placeholder:"Group name",bordered:!0,initialValue:s?s.name:"",onChange:e=>{l({...s,name:e.target.value})}})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:b,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"success",onPress:async()=>{let t=await eP(s.id,s.name);0===t.error&&e.getGroups(),i(!1)},children:"Save"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:c,onClose:C,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Delete Group"})}),(0,r.jsxs)(h.ZP.Body,{style:{alignItems:"center"},children:[(0,r.jsx)(d.Z,{children:"Are you sure you want to delete this group?"}),(0,r.jsx)(d.Z,{color:"warning",children:"This will delete all items in the group as well"})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:C,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"error",onPress:async()=>{0===(await ew(s.id)).error&&e.getGroups(e.currentGroupId),u(!1)},children:"Delete"})]})]})]})}var eR=n(5584);let eO="http://192.168.0.244:9153";async function eL(){let e=await w("".concat(eO,"/system/shutdown"),{method:"GET"});return e}async function eM(){let e=await w("".concat(eO,"/system/restart"),{method:"GET"});return e}eO=window.location.origin;var eW=n(2765);function eH(e){let{socketMessage:t,socket:n,serverAlive:o}=e,s=(0,eG.useRouter)();s.query;let[u,p]=(0,a.useState)([]),[x,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[f,Z]=(0,a.useState)(""),[b,P]=(0,a.useState)(1),[w,S]=(0,a.useState)(null),[k,B]=(0,a.useState)(!1),[v,I]=(0,a.useState)(!0),[D,E]=(0,a.useState)(!1),[A,N]=(0,a.useState)(!1),[T,G]=(0,a.useState)(!1),[z,F]=(0,a.useState)(new Set(["group"])),[R,O]=(0,a.useState)(null),M=(0,a.useMemo)(()=>Array.from(z).join(", ").replaceAll("_"," "),[z]),W=async()=>{let e=await eg();0===e.error?(p(e.data),S(e.data[0])):O(e)},H=async e=>{let t=await ej(e);0===t.error?g(t.data):O(t)};(0,a.useEffect)(()=>{W()},[]),(0,a.useEffect)(()=>{G(!o)},[o]),(0,a.useEffect)(()=>{H(b)},[b]);let _=()=>{j(!1),F(new Set(["group"]))},J=async()=>{let e=await ey(f,M);0===e.error?W():O(e),j(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Project Hub"}),(0,r.jsx)("meta",{name:"description",content:"Project Hub Frontend"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(ed,{setEditing:B,editing:k,setShutdownModalVisible:E,socketMessage:t,socket:n,groupPanelExpanded:v,setGroupPanelExpanded:I,setRestartModalVisible:N,groups:u,currentGroupId:b,setCurrentGroupId:P,setCurrentGroup:S,setVisible:j}),(0,r.jsx)(C.ZP,{container:!0,style:{display:"flex",marginTop:10,paddingLeft:24,paddingRight:24,marginBottom:20,flex:1},children:(null==u?void 0:u.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eh.ZP,{css:{height:"100%",display:"none",marginRight:v?10:0,"@xs":{display:"inline"}},children:(0,r.jsx)(eR.Z,{sx:{justifyContent:"center",height:"100%"},in:v,orientation:"horizontal",children:(0,r.jsx)(eF,{editing:k,groups:u,setGroupItems:g,getGroups:W,setCurrentGroupId:P,setCurrentGroup:S,setGroupPanelExpanded:I,groupPanelExpanded:v,showAddGroupModal:()=>{j(!0)},setError:O})})}),(0,r.jsx)(C.ZP,{xs:!0,item:!0,container:!0,marginLeft:0,children:(0,r.jsx)(ez,{editing:k,groupItems:x,currentGroup:w,getGroups:W,getGroupItems:H,currentGroupId:b,socket:n,setError:O})})]}):(0,r.jsx)(ep.ZP,{isPressable:!0,isHoverable:!0,onClick:()=>{j(!0)},variant:"bordered",css:{minHeight:"500px",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(ep.ZP.Body,{children:(0,r.jsx)(d.Z,{children:"Click here to add your first group"})})})}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:y,onClose:_,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Create a new group"})}),(0,r.jsxs)(h.ZP.Body,{children:[(0,r.jsxs)(C.ZP,{container:!0,alignItems:"center",children:[(0,r.jsx)(C.ZP,{item:!0,xs:6,md:6,container:!0,justifyContent:"center",children:(0,r.jsx)(d.Z,{children:"Type"})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,md:6,children:(0,r.jsxs)(l.ZP,{children:[(0,r.jsx)(l.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:M}),(0,r.jsxs)(l.ZP.Menu,{"aria-label":"Single selection actions",color:"primary",disallowEmptySelection:!0,selectionMode:"single",onSelectionChange:e=>{F(e)},children:[(0,r.jsx)(l.ZP.Item,{children:"Group"},"group"),(0,r.jsx)(l.ZP.Item,{children:"Keypad"},"keypad")]})]})})]}),(0,r.jsx)(L.ZP,{onChange:e=>{Z(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"lg",placeholder:"Group Name"})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:_,children:"Close"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:J,children:"Create"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:D,onClose:()=>{E(!1)},children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Shut down your computer?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{E(!1)},children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:()=>{eL()},children:"Confirm"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"restart-modal",open:A,onClose:()=>{N(!1)},children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Restart your computer?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{N(!1)},children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:()=>{eM()},children:"Confirm"})]})]}),(0,r.jsxs)(h.ZP,{"aria-labelledby":"modal-title",preventClose:!0,blur:!0,open:T,onClose:()=>{G(!1)},children:[(0,r.jsxs)(h.ZP.Header,{children:[(0,r.jsx)(eW.Z,{sx:{fontSize:20,marginRight:0}}),(0,r.jsx)(d.Z,{id:"modal-title",size:18,style:{marginLeft:5},children:"Disconnected"})]}),(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(d.Z,{children:"Please restart Project Hub server and refresh the page."})})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"Error",open:null!==R,onClose:_,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"error-modal-title",size:18,children:"Error"})}),(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(c.Z,{justify:"center",children:(0,r.jsx)(d.Z,{children:null==R?void 0:R.message})})}),(0,r.jsx)(h.ZP.Footer,{children:(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{O(null)},children:"Close"})})]})]})}},9797:function(e){e.exports={shake:"TouchBar_shake__lOuDZ"}}},function(e){e.O(0,[294,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);