(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2696)}])},9515:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/missionControlSymbol.ea45c0cf.png",height:1028,width:1080,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAW0lEQVR42m2NoQ2AQAxFe1eGAY3FY5EoNGhGYAuGuTnAo1iB5EGbk1ybJ/qS/i8iKJVtNFSKw8DCTMvOlkXi5jL5cPoZjJqOhpfDRTRWEj0TY34J/9iIErxc5APd3y+rGJgZ/AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},2696:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return td}});var r=n(5893),i=n(9008),o=n.n(i),a=n(7294),l=n(6249),s=n(5850),c=n(4040),d=n(6979),u=n(9048),h=n(5650),m=n(7690),x=n(7976),g=n(3946),y=n(7957),p=n(685),j=n(135),f=n(6540),Z=n(9797),b=n.n(Z),C=n(6886),w=n(9527);async function P(e,t){try{let n=await fetch(e,t);if(!n)return{error:1,data:null,message:"No response from server"};{let e=await n.json();return e}}catch(e){return{error:1,data:null,message:e.message}}}let S="http://192.168.0.244:9153";async function k(){let e=await P("".concat(S,"/headerComponent"));return e}async function v(e,t,n,r,i){let o=await P("".concat(S,"/headerComponent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,order:t,customInfo:n,bondType:r,bondInfo:i})});return o}async function B(e){let t=await P("".concat(S,"/headerComponent/").concat(e),{method:"DELETE"});return t}async function D(e){let t=await P("".concat(S,"/headerComponent/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({components:e})});return t}async function I(e){let t=await P("".concat(S,"/headerComponent/execute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t}async function z(e,t){let n=await P("".concat(S,"/headerComponent/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return n}S=window.location.origin;var A=n(5675),T=n.n(A);let E="screenSwitcher",N=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),R=(0,w.ZP)("div")({flexDirection:"row",display:"flex"});function F(e){return(0,r.jsx)(R,{style:{width:50,justifyContent:"center"},children:(0,r.jsx)(N,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"missionControl"})},size:"small",style:{color:"white"},children:(0,r.jsx)(T(),{src:n(9515),width:20,height:20,alt:"missionControlSymbol"})})})})}let L=e=>{let t=a.useRef(),n=a.useRef(),r=i=>{if(void 0!=n.current){let t=i-n.current;e(t)}n.current=i,t.current=requestAnimationFrame(r)};a.useEffect(()=>(t.current=requestAnimationFrame(r),()=>cancelAnimationFrame(t.current)),[])};var G=n(2495);let O="clock";function _(){let[e,t]=a.useState("");L(()=>{t(n())});let n=()=>{let e=new Date,t=10>e.getHours()?"0".concat(e.getHours()):e.getHours(),n=10>e.getMinutes()?"0".concat(e.getMinutes()):e.getMinutes(),r=10>e.getSeconds()?"0".concat(e.getSeconds()):e.getSeconds(),i="".concat(t,":").concat(n,":").concat(r);return i};return(0,r.jsx)("div",{style:{width:80,justifyContent:"center",alignItems:"center",display:"flex"},children:(0,r.jsx)(G.ZP,{content:(()=>{let e=new Date,t=10>e.getDate()?"0".concat(e.getDate()):e.getDate(),n=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=10>e.getFullYear()?"0".concat(e.getFullYear()):e.getFullYear(),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],o="".concat(r,"-").concat(n,"-").concat(t," ").concat(i);return o})(),rounded:!0,placement:"bottom",children:(0,r.jsx)(d.Z,{b:!0,color:"inherit",hideIn:"xs",children:e})})})}var M=n(5861),W=n(6562);let H="customText";function J(e){let{text:t,onChangeText:n,editable:i}=e,[o,l]=a.useState(!1);return(0,r.jsx)("div",{onClick:()=>{i&&l(!0)},style:{width:110,height:30,justifyContent:"center",alignItems:"center",overflow:"hidden",display:"flex"},children:o?(0,r.jsx)(W.ZP,{style:{width:110,textAlign:"center",fontSize:16},shadow:!1,initialValue:t,onChange:e=>{n&&n(e.target.value)},onBlur:()=>{l(!1)}}):(0,r.jsx)(M.Z,{textOverflow:"ellipsis",overflow:"hidden",children:t})})}var K=n(6340),V=n(5924),q=n(9066);let U="volumeControl",Y=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),Q=(0,w.ZP)("div")({flexDirection:"row",display:"flex"});function X(e){return(0,r.jsxs)(Q,{style:{width:120,justifyContent:"center"},children:[(0,r.jsx)(Y,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"volume",action:"mute"})},size:"small",style:{color:"white"},children:(0,r.jsx)(V.Z,{fontSize:"small"})})}),(0,r.jsx)(Y,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"volume",action:"down"})},size:"small",style:{color:"white"},children:(0,r.jsx)(q.Z,{fontSize:"small"})})}),(0,r.jsx)(Y,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"volume",action:"up"})},size:"small",style:{color:"white"},children:(0,r.jsx)(K.Z,{fontSize:"small"})})})]})}var $=n(7506);function ee(e,t,n){if(e===t||e<0||t<0)return{newArray:n,isModified:!1};let r=[...n],i=r[e];return r[e]=r[t],r[t]=i,{newArray:r,isModified:!0}}async function et(e,t,n,r){e.preventDefault();let i=n.touchBarComponents.findIndex(e=>e.type===n.currentDraggingComponent.type),{newArray:o,isModified:a}=ee(i,r,n.touchBarComponents);a&&t({touchBarComponents:o,currentDraggingComponent:{...n.currentDraggingComponent,index:r}})}async function en(e,t,n){t({touchBarFull:!1});let r=n.currentDraggingComponent;if(r.from===r.currentLocation){await D(n.touchBarComponents);return}if("touchBarSetting"===r.from&&"touchBar"===r.currentLocation){let e=[...n.touchBarComponents],i=e.findIndex(e=>e.type===r.type);e[i].isDummy=!1,t({touchBarComponents:e});let o=await v(r.type,i,r.text,void 0,void 0);e[i].id=o.data.id,t({touchBarComponents:e}),await D(e)}if("touchBar"===r.from&&"touchBarSetting"===r.currentLocation){let e=[...n.touchBarSettingComponents];e[e.findIndex(e=>e.type===r.type)].isDummy=!1,t({touchBarSettingComponents:e,touchBarComponents:n.touchBarComponents.filter(e=>e.type!==r.type)}),await B(n.currentDraggingComponent.id),await D(n.touchBarComponents)}}var er=n(655),ei=n(3247),eo=n(2709),ea=n(5397);let el="mediaControl",es=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),ec=(0,w.ZP)("div")({flexDirection:"row",display:"flex"});function ed(e){return(0,r.jsxs)(ec,{style:{width:150,justifyContent:"center"},children:[(0,r.jsx)(es,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"mediaControl",action:"previous"})},size:"small",style:{color:"white"},children:(0,r.jsx)(eo.Z,{fontSize:"small"})})}),(0,r.jsx)(es,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"mediaControl",action:"play"})},size:"small",style:{color:"white"},children:(0,r.jsx)(er.Z,{fontSize:"small"})})}),(0,r.jsx)(es,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"mediaControl",action:"pause"})},style:{color:"white"},size:"small",children:(0,r.jsx)(ei.Z,{fontSize:"small"})})}),(0,r.jsx)(es,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"mediaControl",action:"next"})},size:"small",style:{color:"white"},children:(0,r.jsx)(ea.Z,{fontSize:"small"})})})]})}var eu=n(6054),eh=n(5464),em=n(9108),ex=n(3343),eg=n(4282),ey=n(5195),ep=n(1846);let ej="timer",ef=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),eZ=(0,w.ZP)("div")({flexDirection:"row",display:"flex",alignItems:"center",justifyContent:"center",width:180});function eb(e){let[t,n]=a.useState("selection"),[i,o]=a.useState("00:00"),[l,s]=a.useState("00:00"),[c,u]=a.useState(!1),[h,m]=a.useState(!1),[x,y]=a.useState(""),p=a.useRef(null),j=a.useRef(0),f=a.useRef(0),Z=a.useRef(null),C=e=>{let t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)},w=()=>{u(!0),p.current=setInterval(()=>{j.current=j.current+1,o(C(j.current))},1e3)},P=()=>{clearInterval(p.current),u(!1)},S=()=>{clearInterval(p.current),u(!1),j.current=0,o(C(j.current))},k=()=>(0,r.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"center"},children:[(0,r.jsx)(d.Z,{b:!0,color:"inherit",children:i}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginLeft:10},children:[N(),(0,r.jsx)(ef,{style:{marginLeft:2},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:()=>{e.disabled||S()},size:"small",style:{color:"white"},children:(0,r.jsx)(eg.Z,{fontSize:"small"})})}),v()]})]}),v=()=>(0,r.jsx)(ef,{style:{marginLeft:2},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:()=>{e.disabled||n("selection")},size:"small",style:{color:"white"},children:(0,r.jsx)(ex.Z,{fontSize:"small"})})}),B=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ef,{children:(0,r.jsx)(g.Z,{className:"".concat(c||j.current>0?b().gradientBorder:""," ").concat(j.current>0&&!c?b().paused:""),disabled:e.disabled,onClick:async()=>{e.disabled||n("timer")},size:"small",style:{color:"white"},children:(0,r.jsx)(eh.Z,{fontSize:"small"})})}),(0,r.jsx)(ef,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{className:"".concat(h||f.current>0?b().gradientBorder:""," ").concat(f.current>0&&!h?b().paused:""),disabled:e.disabled,onClick:async()=>{e.disabled||(h||f.current>0?n("alarm"):n("alarmTimeSelection"))},size:"small",style:{color:"white"},children:(0,r.jsx)(em.Z,{fontSize:"small"})})})]}),D=t=>{f.current=t,m(!0),n("alarm"),Z.current=setInterval(()=>{f.current>0?f.current=f.current-1:(clearInterval(Z.current),e.setAnimation&&e.setAnimation("".concat(b().vibrate," ").concat(b().gradientBorder))),s(C(f.current))},1e3)},I=()=>{clearInterval(Z.current),m(!1)},z=()=>{clearInterval(Z.current),m(!1),f.current=0,s(C(f.current)),n("alarmTimeSelection"),e.setAnimation&&e.setAnimation("")},A=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ef,{style:{marginLeft:h?2:0},children:(0,r.jsx)(eu.Z,{style:{width:30,height:30},onClick:()=>{h||D(300)},children:(0,r.jsx)(d.Z,{children:"5M"})})}),(0,r.jsx)(ef,{style:{marginLeft:2},onClick:()=>{h||D(600)},children:(0,r.jsx)(eu.Z,{style:{width:30,height:30},children:(0,r.jsx)(d.Z,{children:"10M"})})}),(0,r.jsx)(ef,{style:{marginLeft:2},onClick:()=>{h||D(3600)},children:(0,r.jsx)(eu.Z,{style:{width:30,height:30},children:(0,r.jsx)(d.Z,{children:"1H"})})}),(0,r.jsx)(ef,{style:{marginLeft:2},onClick:()=>{n("alarmTimeSelectionCustom")},children:(0,r.jsx)(eu.Z,{style:{width:30,height:30},children:(0,r.jsx)(ep.Z,{fontSize:"small"})})}),v()]}),T=()=>(0,r.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"center"},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{b:!0,color:"inherit",style:{marginRight:5},children:l}),N(),E(),v()]})}),E=()=>(0,r.jsx)(ef,{style:{marginLeft:2},onClick:()=>{z()},children:(0,r.jsx)(eu.Z,{style:{width:30,height:30},children:(0,r.jsx)(ey.Z,{fontSize:"small"})})}),N=()=>{let n=!1;return"timer"===t?n=c:"alarm"===t&&(n=h),(0,r.jsx)(ef,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:()=>{e.disabled||("timer"===t?n?P():w():"alarm"===t&&(n?I():D(f.current)))},size:"small",style:{color:"white"},children:n?(0,r.jsx)(ei.Z,{fontSize:"small"}):(0,r.jsx)(er.Z,{fontSize:"small"})})})},R=()=>(0,r.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"center"},children:[(0,r.jsx)(W.ZP,{bordered:!0,size:"md",animated:!1,type:"time",onChange:e=>{y(e.target.value)}}),(0,r.jsx)(ef,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:()=>{let e=x.split(":"),t=3600*+e[0]+60*+e[1];D(t)},size:"small",style:{color:"white"},children:(0,r.jsx)(er.Z,{fontSize:"small"})})}),v()]});return(0,r.jsx)("div",{style:{width:180,flexWrap:"nowrap",display:"flex",flexDirection:"row",paddingLeft:10,paddingRight:10},children:(0,r.jsx)(eZ,{children:(()=>{switch(t){case"selection":return B();case"timer":return k();case"alarm":return T();case"alarmTimeSelection":return A();case"alarmTimeSelectionCustom":return R();default:return null}})()})})}var eC=n(242),ew=n(7648);let eP="screenShotControl",eS=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),ek=(0,w.ZP)("div")({flexDirection:"row",display:"flex"});function ev(e){return(0,r.jsxs)(ek,{style:{width:100,justifyContent:"center"},children:[(0,r.jsx)(eS,{children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"screenShot",region:"custom"})},size:"small",style:{color:"white"},children:(0,r.jsx)(eC.Z,{fontSize:"small"})})}),(0,r.jsx)(eS,{style:{marginLeft:3},children:(0,r.jsx)(g.Z,{disabled:e.disabled,onClick:async()=>{e.disabled||await I({type:"screenShot",region:"fullScreen"})},size:"small",style:{color:"white"},children:(0,r.jsx)(ew.Z,{fontSize:"small"})})})]})}var eB=n(4017),eD=n(1915);let eI="quickNotes",ez=(0,w.ZP)("div")({backgroundColor:"#4B4A54",borderRadius:5}),eA=(0,w.ZP)("div")({flexDirection:"row",display:"flex"});function eT(e){var t;let n,{id:i,disabled:o,text:l=""}=e,[s,c]=a.useState(!1),[d,u]=a.useState(l),{globalStore:m,dispatch:x}=a.useContext($.e),y=a.useCallback((t=e=>{let t=[...m.touchBarComponents],n=t.findIndex(e=>e.type===eI);t[n].text=e,x({touchBarComponents:t}),i&&z(i,{customInfo:e})},function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},300)}),[]);return a.useEffect(()=>{y(d)},[d]),(0,r.jsxs)(eA,{style:{width:50,justifyContent:"center"},children:[(0,r.jsx)(ez,{children:(0,r.jsx)(g.Z,{disabled:o,onClick:()=>{o||c(!0)},size:"small",style:{color:"white"},children:(0,r.jsx)(eD.Z,{fontSize:"small"})})}),(0,r.jsx)(h.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:s,onClose:()=>c(!1),width:"80%",preventClose:!0,css:{backdropFilter:"blur(5px)",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,r.jsx)(h.ZP.Body,{css:{backgroundColor:"transparent",marginTop:10},children:(0,r.jsx)(eB.Z,{initialValue:l,bordered:!0,rows:30,size:"lg",onChange:e=>{u(e.target.value)}})})})]})}let eE=(0,w.ZP)("div")({borderRadius:5,height:"100%",display:"flex",alignItems:"center"}),eN={[O]:80,[H]:110,[E]:50,[el]:150,[U]:120,[ej]:180,[eP]:100,[eI]:50};var eR=function(e){let{globalStore:t,dispatch:n}=a.useContext($.e),i=a.useRef(null),[o,l]=a.useState("");a.useEffect(()=>{i.current&&n({touchBarWidth:i.current.offsetWidth})},[i]),a.useEffect(()=>{t.touchBarFull?l(b().shake):o===b().shake&&l("")},[t.touchBarFull]);let s=(e,n,i,o)=>{if(i)return(0,r.jsx)(eE,{style:{width:t.currentDraggingComponent.width,backgroundColor:"#2b2b2b",height:30}});switch(n){case"clock":return(0,r.jsx)(_,{});case"customText":return(0,r.jsx)(J,{text:o||"",editable:!1});case"screenSwitcher":return(0,r.jsx)(F,{disabled:!1});case"mediaControl":return(0,r.jsx)(ed,{disabled:!1});case"volumeControl":return(0,r.jsx)(X,{disabled:!1});case"timer":return(0,r.jsx)(eb,{disabled:!1,setAnimation:l});case"screenShotControl":return(0,r.jsx)(ev,{disabled:!1});case"quickNotes":return(0,r.jsx)(eT,{id:e,disabled:!1,text:o});default:return null}};return(0,r.jsx)(C.ZP,{ref:i,container:!0,flexDirection:"row",alignItems:"center",height:50,paddingLeft:1,paddingRight:1,style:{backgroundColor:e.editing?"#303030":"transparent",borderRadius:10},onDragOver:e=>(function(e,t,n){e.preventDefault();let r=n.touchBarComponents.filter(e=>"touchBarSetting"!==e.from).reduce((e,t)=>e+t.width,0)+n.currentDraggingComponent.width;if(r>n.touchBarWidth&&!n.touchBarFull)t({touchBarFull:!0});else if(r<=n.touchBarWidth&&(t({touchBarFull:!1}),"touchBarSetting"===n.currentDraggingComponent.from&&!n.touchBarComponents.find(e=>e.isDummy))){let e=[...n.touchBarSettingComponents];e[e.findIndex(e=>e.type===n.currentDraggingComponent.type)].isDummy=!0,t({touchBarComponents:[...n.touchBarComponents,{...n.currentDraggingComponent,isDummy:!0}],touchBarSettingComponents:e,currentDraggingComponent:{...n.currentDraggingComponent,currentLocation:"touchBar"}})}})(e,n,t),className:o,children:t.touchBarComponents.map((i,o)=>(console.log(i),(0,r.jsx)(eE,{draggable:e.editing,onDragStart:e=>{var t;n({currentDraggingComponent:{id:(t={id:i.id,index:o,type:i.type,width:i.width,from:"touchBar"}).id,type:t.type,width:t.width,from:"touchBar",currentLocation:"touchBar",isDummy:!1}})},onDragOver:e=>{et(e,n,t,o)},onDragEnd:e=>{en(e,n,t)},children:s(i.id,i.type,i.isDummy,i.text)},"touchBarComponent:"+o)))})};let eF=(0,w.ZP)("div")({backgroundColor:"#303030",borderRadius:5,paddingTop:10,paddingBottom:10});function eL(e){let{globalStore:t,dispatch:n}=a.useContext($.e),i=(e,i,o,a,l,s,c)=>(0,r.jsxs)(C.ZP,{item:!0,alignItems:"center",container:!0,direction:"column",xs:3,children:[(0,r.jsx)(eF,{style:{width:a,opacity:s?0:1},draggable:!s,onDragStart:t=>{var r;n({currentDraggingComponent:{type:(r={index:e,type:o,width:a,from:"touchBarSetting",text:c}).type,width:r.width,from:"touchBarSetting",currentLocation:"touchBarSetting",isDummy:!1,text:r.text}})},onDragEnd:e=>{en(e,n,t)},children:i}),(0,r.jsx)(M.Z,{children:l})]},"touchBarSettingComponent"+e);return(0,r.jsx)(C.ZP,{container:!0,columnSpacing:2,alignItems:"center",flexWrap:"wrap",rowSpacing:3,onDragOver:e=>(function(e,t,n){if(e.preventDefault(),n.touchBarSettingComponents.find(e=>e.isDummy)){let e=[...n.touchBarSettingComponents];e.find(e=>e.type===n.currentDraggingComponent.type).isDummy=!1,t({touchBarComponents:n.touchBarComponents.filter(e=>!e.isDummy),touchBarSettingComponents:e,currentDraggingComponent:{...n.currentDraggingComponent,currentLocation:"touchBarSetting"}})}})(e,n,t),children:t.touchBarSettingComponents.map((e,o)=>{let a=null,l=0;switch(e.type){case O:a=(0,r.jsx)(_,{}),l=80;break;case H:a=(0,r.jsx)(J,{text:e.text,editable:!0,onChangeText:e=>{let r=[...t.touchBarSettingComponents],i=r.findIndex(e=>e.type===H);r[i].text=e,n({touchBarSettingComponents:r})}}),l=110;break;case E:a=(0,r.jsx)(F,{disabled:!0}),l=50;break;case el:a=(0,r.jsx)(ed,{disabled:!0}),l=150;break;case U:a=(0,r.jsx)(X,{disabled:!0}),l=120;break;case ej:a=(0,r.jsx)(eb,{disabled:!0}),l=180;break;case eP:a=(0,r.jsx)(ev,{disabled:!0}),l=100;break;case eI:a=(0,r.jsx)(eT,{disabled:!0}),l=50;break;default:a=null}return i(o,a,e.type,l,e.name,e.isDummy,e.text)})})}var eG=n(9858);function eO(e){var t;let{setShutdownModalVisible:n,socketMessage:i,socket:o,groupPanelExpanded:Z,setGroupPanelExpanded:b,setRestartModalVisible:C,setVisible:w}=e,{globalStore:P,dispatch:S}=a.useContext($.e);(0,l.Z)();let[k,v]=a.useState(0),[B,D]=a.useState(0),[I,z]=a.useState(!1),[A,T]=a.useState(!1),E=a.useRef(null),N=()=>{T(!1)};return(0,r.jsxs)(u.ZP,{isBordered:!0,variant:"floating",maxWidth:"fluid",css:{zIndex:A?1e4:100},children:[(0,r.jsx)(u.ZP.Toggle,{ref:E,showIn:"xs"}),(0,r.jsx)(u.ZP.Content,{css:{display:"none","@xs":{display:"flex"},alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(g.Z,{onClick:()=>{b(!Z)},children:(0,r.jsx)(p.Z,{style:{color:"white",transform:"rotate(".concat(Z?"0deg":"180deg",")")}})})}),(0,r.jsx)(u.ZP.Content,{css:{flex:1,marginLeft:10,display:"none","@xs":{display:"flex"}},children:(0,r.jsx)(eR,{editing:A})}),(0,r.jsx)(u.ZP.Content,{css:{"@xs":{jc:"flex-end"}},children:(()=>{let e=[(0,r.jsx)(s.ZP.Item,{color:P.editing?"success":"primary",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(y.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"none",marginLeft:5},children:P.editing?"Done":"Edit"})]})},"edit"),(0,r.jsx)(s.ZP.Item,{withDivider:!0,color:"warning",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(eg.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"uppercase",marginLeft:5},children:"Restart"})]})},"restart"),(0,r.jsx)(s.ZP.Item,{color:"error",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(eG.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"uppercase",marginLeft:5},children:"Shutdown"})]})},"shutdown")];return P.editing&&e.unshift((0,r.jsx)(s.ZP.Item,{color:"primary",children:(0,r.jsxs)(c.Z,{align:"center",children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(d.Z,{style:{textTransform:"none",marginLeft:5},children:"Edit Header"})]})},"touchBarSetting")),(0,r.jsxs)(s.ZP,{placement:"bottom-right",children:[(0,r.jsx)(u.ZP.Item,{children:(0,r.jsx)(s.ZP.Trigger,{children:(0,r.jsx)(g.Z,{style:{color:"white"},children:(0,r.jsx)(x.Z,{})})})}),(0,r.jsx)(s.ZP.Menu,{"aria-label":"Actions",color:"secondary",onAction:e=>{switch(e){case"edit":S({editing:!P.editing});break;case"touchBarSetting":T(!0);break;case"shutdown":n(!0);break;case"restart":C(!0)}},children:e})]})})()}),(0,r.jsxs)(u.ZP.Collapse,{disableAnimation:!0,children:[null===(t=P.groups)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)(u.ZP.CollapseItem,{children:(0,r.jsx)(m.ZP,{color:P.currentGroupID===e.id?"primary":"secondary",onPress:()=>{if(E.current){var t;null===(t=E.current)||void 0===t||t.click()}S({currentGroupID:e.id,currentGroup:e})},ghost:!0,css:{minWidth:"100%"},href:"#",children:e.name})},"headerGroupItem:"+e.id)),(0,r.jsx)(u.ZP.CollapseItem,{children:(0,r.jsx)(m.ZP,{onPress:()=>{if(E.current){var e;null===(e=E.current)||void 0===e||e.click()}w(!0)},css:{minWidth:"100%",borderColor:"grey",backgroundColor:"transparent"},ghost:!0,children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"TouchBar Setting",open:A,onClose:N,blur:!0,width:"lg",children:[(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(eL,{})}),(0,r.jsx)(h.ZP.Footer,{})]})]})}var e_=n(9837),eM=n(2553),eW=n(7501),eH=n(8773);let eJ="http://192.168.0.244:9153";async function eK(){let e=await P("".concat(eJ,"/group"));return e}async function eV(e,t){let n=await P("".concat(eJ,"/group"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,type:t})});return n}async function eq(e){let t=await P("".concat(eJ,"/groupItem/").concat(e));return t}async function eU(e){let{groupId:t,name:n,type:r,selectedFile:i,url:o,keybind:a,icon:l}=e,s=await P("".concat(eJ,"/groupItem/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,type:r,selectedFile:i,url:o,keybind:a,icon:l})});return s}async function eY(){let e=await P("".concat(eJ,"/requestFileSelection"));return e}async function eQ(e){let t=await P("".concat(eJ,"/groupItem/execute/").concat(e));return t}async function eX(e){let t=await P("".concat(eJ,"/groupItem/").concat(e),{method:"DELETE"});return t}async function e$(e,t){let n=await P("".concat(eJ,"/group/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return n}async function e0(e){let t=await P("".concat(eJ,"/group/").concat(e),{method:"DELETE"});return t}async function e1(e,t){let n=await P("".concat(eJ,"/groupItem/rename/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return n}async function e5(e){let t=await P("".concat(eJ,"/groupItem/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupItems:e})});return t}async function e2(e){let t=await P("".concat(eJ,"/group/reorder"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:e})});return t}async function e3(e){let t=new FormData;t.append("file",e);let n=await P("".concat(eJ,"/upload/icon"),{method:"POST",body:t});return n}eJ=window.location.origin;var e4=n(3321),e8=n(9829);function e6(e){let{socket:t}=e,n=e=>(0,r.jsx)(e4.Z,{...e,style:{width:"100%",height:"100%",borderRadius:15,backgroundColor:function(e,t){if(!e||void 0===e)return"rgba(255,255,255,0.2)";if("#"===e[0]){let n=e.substring(1),r=parseInt(n,16);return"rgba(".concat(r>>16&255,", ").concat(r>>8&255,", ").concat(255&r,", ").concat(t,")")}if(e.startsWith("rgb")){let n=e.match(/\d+/g);return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(t,")")}return e}(e.backgroundColor,.8),backdropFilter:"blur(5px)"}}),i=e=>{let n={type:"keyPress",data:{key:e.keyName}};t.send(JSON.stringify(n))},o=[{label:"7",keyName:"NumPad7"},{label:"8",keyName:"NumPad8"},{label:"9",keyName:"NumPad9"},{label:"4",keyName:"NumPad4"},{label:"5",keyName:"NumPad5"},{label:"6",keyName:"NumPad6"},{label:"1",keyName:"NumPad1"},{label:"2",keyName:"NumPad2"},{label:"3",keyName:"NumPad3"},{label:"0",keyName:"NumPad0"},{label:".",keyName:"Period"}].map(e=>(0,r.jsx)(C.ZP,{xs:"0"===e.label?8:4,item:!0,children:(0,r.jsx)(n,{variant:"contained",onClick:()=>{i(e)},children:e.label})},e.label));return(0,r.jsxs)(C.ZP,{container:!0,item:!0,xs:12,direction:"column",children:[(0,r.jsx)(C.ZP,{container:!0,item:!0,xs:1,children:[{label:"Backspace",keyName:"Backspace"},{label:"/",keyName:"Divide"},{label:"*",keyName:"Multiply"},{label:"-",keyName:"Minus"}].map(e=>(0,r.jsx)(C.ZP,{xs:3,item:!0,children:(0,r.jsx)(n,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{i(e)},children:e.label})},e.keyName))}),(0,r.jsxs)(C.ZP,{container:!0,item:!0,xs:!0,direction:"row",children:[(0,r.jsx)(C.ZP,{container:!0,item:!0,xs:9,children:o}),(0,r.jsx)(C.ZP,{item:!0,container:!0,xs:3,children:(0,r.jsx)(C.ZP,{container:!0,xs:!0,direction:"column",item:!0,children:[{label:"+",keyName:"Add"},{label:"Enter",keyName:"Enter",backgroundColor:"rgb(225, 163, 91)"}].map(e=>(0,r.jsx)(C.ZP,{xs:!0,item:!0,children:(0,r.jsx)(n,{variant:"contained",backgroundColor:e.backgroundColor?e.backgroundColor:void 0,onClick:()=>{i(e)},children:e.label})},e.keyName))})})]})]})}var e9=n(1163),e7=n(336),te=n(8629),tt=n(6451);function tn(e){let{globalStore:t,dispatch:n}=a.useContext($.e),[i,o]=a.useState(!1),[l,s]=a.useState(!1),c=t.host;return(0,r.jsx)(eM.ZP,{draggable:e.draggable,onDragStart:t=>{e.onDragStart&&e.onDragStart(t),s(!0)},onDragOver:t=>{t.preventDefault(),e.onDragOver&&e.onDragOver(t)},onDragEnd:t=>{e.onDragEnd&&e.onDragEnd(t),s(!1)},xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex",overflow:"hidden",opacity:l?.5:1},children:(0,r.jsxs)(eu.Z,{onClick:()=>{e.onClick&&e.onClick()},style:{borderWidth:3,borderStyle:"solid",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",flexDirection:"column",flex:1,overflow:"hidden"},children:[e.editing&&(0,r.jsx)(g.Z,{onClick:t=>{t.stopPropagation(),e.onClickDelete&&e.onClickDelete()},color:"error",style:{position:"absolute",top:0,right:0},children:(0,r.jsx)(e7.Z,{fontSize:"small"})}),(e=>{let t="",n=null;if("keybind"===e.type){if(!e.icon)return(0,r.jsx)(ep.Z,{style:{marginBottom:10,color:"white",width:50,height:50}});t=c+"/icons/"+e.icon}return"file"===e.type?(i&&(n=(0,r.jsx)(tt.Z,{style:{marginBottom:10,color:"white",width:50,height:50}})),t=c+"/icons/"+e.icon):"link"===e.type&&(i&&(n=(0,r.jsx)(te.Z,{style:{marginBottom:10,color:"white",width:50,height:50}})),t=e.icon.startsWith("http")?e.icon:c+"/icons/"+e.icon),i?n:(0,r.jsx)(e_.ZP,{src:t,onError:()=>{o(!0)},style:{marginBottom:10,height:50,width:50,objectFit:"fill"}})})(e.groupItem),(0,r.jsx)(d.Z,{css:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal",width:"calc(100% - 20px)"},children:e.groupItem.name})]})})}function tr(e){let{globalStore:t,dispatch:n}=a.useContext($.e),i=window.location.origin,o=window.matchMedia("(any-hover: none)").matches,l=(0,e9.useRouter)(),u=l.query,[x,y]=a.useState(!1),[p,j]=a.useState(new Set(["file"])),[Z,b]=a.useState(""),[C,w]=a.useState(""),[P,S]=a.useState(null),[k,v]=a.useState(!1),[B,D]=a.useState(!1),[I,z]=a.useState(!1),[A,T]=a.useState(null),[E,N]=a.useState([]),[R,F]=a.useState(""),[L,G]=a.useState(!1),[O,_]=a.useState(-1),[M,H]=a.useState(null),J=a.useMemo(()=>Array.from(p).join(", ").replaceAll("_"," "),[p]);(0,a.useEffect)(()=>{t.editing||_(-1)},[t.editing]);let K=()=>{if(u.action&&"add"===u.action&&(y(!0),u.type)){let e=u.type;j(new Set([e]))}};(0,a.useEffect)(()=>{K()},[u]);let V=async()=>{v(!0);let e=await eY();1===e.error?v(!1):0===e.error&&(S(e.data),H(e.data),v(!1))},q=(0,a.useCallback)(e=>{e.preventDefault();let t=[];e.ctrlKey&&t.push("Control"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Command"),[16,17,18,91,93].includes(e.keyCode)?F(""):(e.code.includes("Digit")?F(e.code.replace("Digit","Num")):e.code.includes("Key")&&F(e.code.replace("Key","")),N(t))},[]);(0,a.useEffect)(()=>{""===Z&&P&&b(P.name)},[P]);let U=()=>(0,r.jsxs)(eM.ZP.Container,{direction:"row",wrap:"wrap",gap:1,children:[t.groupItems.map((e,i)=>(0,r.jsx)(tn,{index:i,groupItem:e,editing:t.editing,draggable:t.editing,onClick:()=>{t.editing?(z(!0),T(e)):eQ(e.id)},onClickDelete:()=>{D(!0),T(e)},onDragStart:e=>{_(i)},onDragOver:e=>{e.preventDefault();let{newArray:r,isModified:o}=ee(O,i,t.groupItems);o&&(_(i),n({groupItems:r}))},onDragEnd:async e=>{_(-1),await e5(t.groupItems)}},"groupItem"+i)),t.groupItems.length<20&&(0,r.jsx)(eM.ZP,{xs:4,sm:2,md:1,style:{aspectRatio:"1/1",display:"flex"},children:(0,r.jsx)(e4.Z,{onClick:()=>{y(!0)},style:{display:"flex",borderWidth:3,borderStyle:"dashed",flex:1,borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]}),Y=()=>{y(!1),S(null),b(""),w(""),j(new Set(["file"])),N([]),F(""),H(null)},Q=async()=>{let r,i=M instanceof File;if(i&&0!==(r=await e3(M)).error){e.setError(r);return}let o=await eU({groupId:t.currentGroupID,name:Z,url:C,type:p.values().next().value,selectedFile:P,keybind:E.join("+")+":"+R,icon:i?r.data:void 0});if(0===o.error){Y();let e=await eq(t.currentGroupID);0===e.error&&n({groupItems:e.data})}else e.setError(o)},X=()=>{D(!1)},et=()=>{z(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eH.ZP,{variant:"bordered",css:{minHeight:"500px",flex:1},children:(()=>{var n;switch(null===(n=t.currentGroup)||void 0===n?void 0:n.type){case"group":return U();case"keypad":return(0,r.jsx)(e6,{socket:e.socket});default:return null}})()}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"Group item create modal",open:x,onClose:Y,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"createGroupItem",size:18,children:"Create a new group item"})}),(0,r.jsxs)(h.ZP.Body,{style:{alignItems:"center",justifyContent:"center"},children:[(0,r.jsxs)(eM.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eM.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Type"})}),(0,r.jsx)(eM.ZP,{xs:8,justify:"center",children:(0,r.jsxs)(s.ZP,{children:[(0,r.jsx)(s.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:J}),(0,r.jsxs)(s.ZP.Menu,{"aria-label":"Group item type selection",color:"primary",disallowEmptySelection:!0,selectionMode:"single",onSelectionChange:e=>{e.has("keybind")&&o?alert("Please set the keybinding on desktop"):j(e)},children:[(0,r.jsx)(s.ZP.Item,{"aria-label":"File",children:"File"},"file"),(0,r.jsx)(s.ZP.Item,{"aria-label":"Link",children:"Link"},"link"),(0,r.jsx)(s.ZP.Item,{"aria-label":"Keybind",children:"Keybind"},"keybind")]})]})})]}),(0,r.jsxs)(eM.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eM.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Name"})}),(0,r.jsx)(eM.ZP,{xs:8,justify:"center",children:(0,r.jsx)(W.ZP,{defaultValue:Z,onChange:e=>{L||b(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]}),"file"===J||"link"===J?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(eM.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eM.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"file"===J?"Select File":"URL"})}),(0,r.jsx)(eM.ZP,{xs:8,justify:"center",children:"file"===J?P?(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(d.Z,{children:P.nameWithExtension}),(0,r.jsx)(g.Z,{style:{color:"white"},size:"small",onClick:()=>{S(null)},children:(0,r.jsx)(e8.Z,{fontSize:"inherit"})})]}):(0,r.jsx)(e4.Z,{color:"primary",onClick:V,children:"Browse"}):(0,r.jsx)(W.ZP,{onChange:e=>{w(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"md"})})]})}):null,(()=>{if("keybind"!==J)return null;let e=[...E,R].join("+");return(0,r.jsxs)(eM.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eM.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Keybind"})}),(0,r.jsx)(eM.ZP,{xs:8,justify:"center",children:(0,r.jsx)(W.ZP,{readOnly:!0,value:e,bordered:!0,fullWidth:!0,contentRightStyling:!1})}),(0,r.jsx)(eM.ZP,{xs:12,justify:"flex-end",style:{marginTop:-15},children:(0,r.jsx)(m.ZP,{size:"xs",color:L?"error":"primary",onPress:()=>{L?window.removeEventListener("keydown",q):(N([]),F(""),window.addEventListener("keydown",q)),G(!L)},children:L?"Stop Recording":"Start Recording"})})]})})(),(0,r.jsxs)(eM.ZP.Container,{alignItems:"center",gap:2,children:[(0,r.jsx)(eM.ZP,{xs:4,justify:"flex-end",children:(0,r.jsx)(d.Z,{children:"Icon"})}),(0,r.jsx)(eM.ZP,{xs:8,justify:"center",children:(()=>{if(!M)return(0,r.jsxs)(e4.Z,{variant:"text",component:"label",color:"primary",children:["Upload Icon",(0,r.jsx)("input",{type:"file",hidden:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&H(e.target.files[0])}})]});{let e=M instanceof File,t=M&&e?URL.createObjectURL(M):"".concat(i,"/icons/").concat(M.icon);return(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(e_.ZP,{src:t,width:50,height:50}),(0,r.jsx)(g.Z,{style:{color:"white"},size:"small",onClick:()=>{H(null)},children:(0,r.jsx)(e8.Z,{fontSize:"inherit"})})]})}})()})]})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(e4.Z,{color:"secondary",onClick:Y,children:"Close"}),(0,r.jsx)(e4.Z,{color:"primary",onClick:Q,children:"Create"})]})]}),(0,r.jsx)(h.ZP,{"aria-labelledby":"waiting-for-file",open:k,preventClose:!0,onClose:()=>{v(!1)},children:(0,r.jsx)(h.ZP.Body,{children:(0,r.jsxs)(c.Z,{align:"center",justify:"center",children:[(0,r.jsx)(eW.ZP,{}),(0,r.jsx)(d.Z,{style:{marginLeft:10},children:"Please select file on your PC..."})]})})}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:B,onClose:X,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Delete Group Item"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(d.Z,{children:"Are you sure you want to delete this group item?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:X,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"error",onPress:async()=>{if(0===(await eX(A.id)).error){let e=await eq(t.currentGroupID);0===e.error&&n({groupItems:e.data})}D(!1)},children:"Delete"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:I,onClose:et,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Rename Item"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(W.ZP,{placeholder:"Item name",bordered:!0,initialValue:A?A.name:"",onChange:e=>{T({...A,name:e.target.value})}})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:et,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"success",onPress:async()=>{let e=await e1(A.id,A.name);if(0===e.error){let e=await eq(t.currentGroupID);0===e.error&&n({groupItems:e.data})}z(!1)},children:"Save"})]})]})]})}function ti(e){let{globalStore:t,dispatch:n}=a.useContext($.e),[i,o]=a.useState(!1),[l,s]=a.useState(null),[c,u]=a.useState(!1),[x,y]=a.useState(-1);a.useEffect(()=>{t.groups&&t.groups.length>0&&(n({currentGroupID:t.groups[0].id}),n({currentGroup:t.groups[0]}))},[t.groups]);let p=async e=>{n({currentGroupID:e.id,currentGroup:e})},j=()=>{o(!1)},Z=()=>{u(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eH.ZP,{variant:"bordered",css:{minHeight:"500px",justifyContent:"center",width:"100%",height:"100%"},children:(0,r.jsxs)(eH.ZP.Body,{style:{alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},children:[t.groups.map((e,i)=>(0,r.jsxs)(eu.Z,{draggable:t.editing,onDragStart:e=>{y(i)},onDragOver:e=>{e.preventDefault();let{newArray:r,isModified:o}=ee(x,i,t.groups);o&&(y(i),n({groups:r}))},onDragEnd:async e=>{y(-1),await e2(t.groups)},onClick:()=>{t.editing?(o(!0),s(e)):p(e)},style:{borderWidth:0,width:"100%",alignItems:"center",justifyContent:"center",borderRadius:10,height:"10%"},children:[(0,r.jsx)(d.Z,{color:t.currentGroupID===e.id?"primary":"none",children:e.name}),t.editing&&(0,r.jsx)(g.Z,{onClick:t=>{t.stopPropagation(),u(!0),s(e)},color:"error",style:{position:"absolute",top:-10,right:-10},children:(0,r.jsx)(e7.Z,{fontSize:"small"})})]},"group-"+e.id)),(0,r.jsx)(eM.ZP,{children:(0,r.jsx)(e4.Z,{onClick:()=>{e.showAddGroupModal()},style:{display:"flex",borderWidth:3,borderStyle:"dashed",borderRadius:10,borderColor:"gray",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},children:(0,r.jsx)(f.Z,{style:{color:"gray"}})})})]})}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"rename-modal",open:i,onClose:j,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Rename Group"})}),(0,r.jsx)(h.ZP.Body,{style:{alignItems:"center"},children:(0,r.jsx)(W.ZP,{placeholder:"Group name",bordered:!0,initialValue:l?l.name:"",onChange:e=>{s({...l,name:e.target.value})}})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:j,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"success",onPress:async()=>{let e=await e$(l.id,l.name);if(0===e.error){let e=await eK();0===e.error&&n({groups:e.data})}o(!1)},children:"Save"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,blur:!0,"aria-labelledby":"confirm-delete",open:c,onClose:Z,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Delete Group"})}),(0,r.jsxs)(h.ZP.Body,{style:{alignItems:"center"},children:[(0,r.jsx)(d.Z,{children:"Are you sure you want to delete this group?"}),(0,r.jsx)(d.Z,{color:"warning",children:"This will delete all items in the group as well"})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"secondary",onPress:Z,children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,color:"error",onPress:async()=>{if(0===(await e0(l.id)).error){let e=await eK();0===e.error&&n({groups:e.data})}u(!1)},children:"Delete"})]})]})]})}var to=n(5584);let ta="http://192.168.0.244:9153";async function tl(){let e=await P("".concat(ta,"/system/shutdown"),{method:"GET"});return e}async function ts(){let e=await P("".concat(ta,"/system/restart"),{method:"GET"});return e}ta=window.location.origin;var tc=n(2765);function td(e){var t;let{socketMessage:n,socket:i,serverAlive:l}=e,{globalStore:u,dispatch:x}=(0,a.useContext)($.e),g=(0,e9.useRouter)();g.query;let[y,p]=(0,a.useState)(!1),[j,f]=(0,a.useState)(""),[Z,b]=(0,a.useState)(!0),[w,P]=(0,a.useState)(!1),[S,v]=(0,a.useState)(!1),[B,D]=(0,a.useState)(!1),[I,z]=(0,a.useState)(new Set(["group"])),[A,T]=(0,a.useState)(null),E=(0,a.useMemo)(()=>Array.from(I).join(", ").replaceAll("_"," "),[I]),N=async()=>{x({loading:!0});let e=await eK();x({loading:!1}),0===e.error?x({groups:e.data}):T(e)},R=async e=>{x({loading:!0});let t=await eq(e);x({loading:!1}),0===t.error?x({groupItems:t.data}):T(t)},F=async()=>{let e=await k();if(0===e.error){var t;let n;let{touchBarComponents:r,touchBarSettingComponents:i}=(t=e.data,n=[...u.touchBarSettingComponents],{touchBarComponents:t.map(e=>{n.find(t=>{t.type===e.type&&(t.isDummy=!0)});let t=eN[e.type];return{id:e.id,type:e.type,width:t,from:"touchBar",currentLocation:"touchBar",isDummy:!1,text:e.customInfo}}),touchBarSettingComponents:n});x({touchBarComponents:r,touchBarSettingComponents:i})}};(0,a.useEffect)(()=>{n&&L(n)},[n]);let L=e=>{if("updateInfo"===e.type)switch(e.target){case"group":N();break;case"groupItem":R(u.currentGroupID);break;case"header":F()}};(0,a.useEffect)(()=>{N(),F()},[]),(0,a.useEffect)(()=>{D(!l)},[l]),(0,a.useEffect)(()=>{R(u.currentGroupID)},[u.currentGroupID]);let G=()=>{p(!1),z(new Set(["group"]))},O=async()=>{let e=await eV(j,E);0===e.error?N():T(e),p(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"Project Hub"}),(0,r.jsx)("meta",{name:"description",content:"Project Hub Frontend"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(eO,{setShutdownModalVisible:P,socketMessage:n,socket:i,groupPanelExpanded:Z,setGroupPanelExpanded:b,setRestartModalVisible:v,setVisible:p}),(0,r.jsx)(C.ZP,{container:!0,style:{display:"flex",marginTop:10,paddingLeft:24,paddingRight:24,marginBottom:20,flex:1},children:(null===(t=u.groups)||void 0===t?void 0:t.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eM.ZP,{css:{height:"100%",display:"none",marginRight:Z?10:0,"@xs":{display:"inline"}},children:(0,r.jsx)(to.Z,{sx:{justifyContent:"center",height:"100%"},in:Z,orientation:"horizontal",children:(0,r.jsx)(ti,{setGroupPanelExpanded:b,groupPanelExpanded:Z,showAddGroupModal:()=>{p(!0)},setError:T})})}),(0,r.jsx)(C.ZP,{xs:!0,item:!0,container:!0,marginLeft:0,children:(0,r.jsx)(tr,{socket:i,setError:T})})]}):(0,r.jsx)(eH.ZP,{isPressable:!0,isHoverable:!0,onClick:()=>{p(!0)},variant:"bordered",css:{minHeight:"500px",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(eH.ZP.Body,{children:(0,r.jsx)(d.Z,{children:"Click here to add your first group"})})})}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:y,onClose:G,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Create a new group"})}),(0,r.jsxs)(h.ZP.Body,{children:[(0,r.jsxs)(C.ZP,{container:!0,alignItems:"center",children:[(0,r.jsx)(C.ZP,{item:!0,xs:6,md:6,container:!0,justifyContent:"center",children:(0,r.jsx)(d.Z,{children:"Type"})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,md:6,children:(0,r.jsxs)(s.ZP,{children:[(0,r.jsx)(s.ZP.Button,{flat:!0,color:"primary",css:{tt:"capitalize"},children:E}),(0,r.jsxs)(s.ZP.Menu,{"aria-label":"Single selection actions",color:"primary",disallowEmptySelection:!0,selectionMode:"single",onSelectionChange:e=>{z(e)},children:[(0,r.jsx)(s.ZP.Item,{children:"Group"},"group"),(0,r.jsx)(s.ZP.Item,{children:"Keypad"},"keypad")]})]})})]}),(0,r.jsx)(W.ZP,{onChange:e=>{f(e.target.value)},clearable:!0,bordered:!0,fullWidth:!0,color:"primary",size:"lg",placeholder:"Group Name"})]}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:G,children:"Close"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:O,children:"Create"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"modal-title",open:w,onClose:()=>{P(!1)},children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Shut down your computer?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{P(!1)},children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:()=>{tl()},children:"Confirm"})]})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"restart-modal",open:S,onClose:()=>{v(!1)},children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"modal-title",size:18,children:"Restart your computer?"})}),(0,r.jsxs)(h.ZP.Footer,{children:[(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{v(!1)},children:"Cancel"}),(0,r.jsx)(m.ZP,{auto:!0,onPress:()=>{ts()},children:"Confirm"})]})]}),(0,r.jsxs)(h.ZP,{"aria-labelledby":"modal-title",preventClose:!0,blur:!0,open:B,onClose:()=>{D(!1)},children:[(0,r.jsxs)(h.ZP.Header,{children:[(0,r.jsx)(tc.Z,{sx:{fontSize:20,marginRight:0}}),(0,r.jsx)(d.Z,{id:"modal-title",size:18,style:{marginLeft:5},children:"Disconnected"})]}),(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(d.Z,{children:"Please restart Project Hub server and refresh the page."})})]}),(0,r.jsxs)(h.ZP,{closeButton:!0,"aria-labelledby":"Error",open:null!==A,onClose:G,children:[(0,r.jsx)(h.ZP.Header,{children:(0,r.jsx)(d.Z,{id:"error-modal-title",size:18,children:"Error"})}),(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(c.Z,{justify:"center",children:(0,r.jsx)(d.Z,{children:null==A?void 0:A.message})})}),(0,r.jsx)(h.ZP.Footer,{children:(0,r.jsx)(m.ZP,{auto:!0,flat:!0,color:"error",onPress:()=>{T(null)},children:"Close"})})]}),(0,r.jsx)(h.ZP,{preventClose:!0,"aria-labelledby":"loading",open:u.loading,onClose:()=>x({loading:!1}),width:"100px",children:(0,r.jsx)(h.ZP.Body,{children:(0,r.jsx)(eW.ZP,{})})})]})}},9797:function(e){e.exports={shake:"TouchBar_shake__lOuDZ",gradientBorder:"TouchBar_gradientBorder__N98nW",animatedGradient:"TouchBar_animatedGradient__2c8QO",paused:"TouchBar_paused__6FJd9",vibrate:"TouchBar_vibrate__IWoFS"}}},function(e){e.O(0,[321,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);